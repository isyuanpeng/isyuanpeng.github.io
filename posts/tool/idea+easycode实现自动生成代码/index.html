<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>IDEA&#43;EasyCode实现自动生成代码 | Isyuanpeng</title>
<meta name="keywords" content="IDEA, EasyCode, 自动生成代码" />
<meta name="description" content="需求
对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。
自动生成代码的现状
目前有多种方式可以自动生成代码:


将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性


在线网站自动生成代码，使用互联网，安全性较低


IDEA&#43;groovy方法，目前了解到生成的代码比较简单，定制化程度不高


IDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成


最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。
&gt; https://gitee.com/makejava/EasyCode
Velocity(速度)语法
比较精简的一种语言，关键字不多，和代码混合使用。教程：https://www.cnblogs.com/hduwbf/p/6201731.html
EasyCode
我的模板(具有个人风格，可以进行修改使用)
Controller


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117


    ##导入宏定义
    $!{init.vm}
    $!{define.vm}

    ##保存文件（宏定义）
    #save(&#34;/controller/$!{workPath}&#34;, &#34;Controller.java&#34;)

    ##包路径（宏定义）
    #setPackageSuffix(&#34;controller$!{workPackage}&#34;)

    $!{autoImport.vm}
    import io.swagger.annotations.ApiOperation;
    import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType};
    import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType};
    import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType};
    import org.springframework.web.bind.annotation.*;
    import io.swagger.annotations.Api;
    import org.apache.commons.lang3.StringUtils;

    import javax.annotation.Resource;
    import java.util.List;

    ##表注释（宏定义）
    #classNotes(&#34;表控制层&#34;)
    @Api(tags = &#34;$!{tableInfo.comment}&#34;)
    @RestController
    @RequestMapping(&#34;$!entityName&#34;)
    public class $!apiType {

        @Resource
        private $!serviceType $!serviceName;

        /**
        * 分页查询所有数据
        *
        * @param query 查询实体
        * @return 所有数据
        */
        @PostMapping(&#34;/queryPage&#34;)
        @ApiOperation(&#34;按字段条件分页查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; query$!{entityType}ByPage(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByPage(query);
        }

        /**
        * 通过主键查询多条数据
        *
        * @param  query 查询实体
        * @return 多条数据
        */
        @PostMapping(&#34;/query&#34;)
        @ApiOperation(&#34;根据Id查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;List&lt;$!voType&gt;&gt; query(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByCondition(query);
        }

        /**
        * 新增数据
        *
        * @param dto 实体对象
        * @return 新增结果
        */
        @PostMapping(&#34;/save&#34;)
        @ApiOperation(&#34;新增$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;Object&gt; save(@RequestBody $!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            
            if ($!{serviceName}.isExist(dto)) {
                return new BaseResult&lt;&gt;(ResponseEnum.REPEAT.getCode(), ResponseEnum.REPEAT.getMessage());
            }
            
            return $!{serviceName}.save(dto);
        }
        
        
        /**
        * 修改数据
        *
        * @param dto 实体对象
        * @return 修改结果
        */
        @PostMapping(&#34;/update&#34;)
        @ApiOperation(&#34;更新$!{tableInfo.comment}&#34;)
        public BaseResult&lt;Object&gt; update($!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            return $!{serviceName}.update(dto);
        }
    
        
        /**
        * 删除多条数据
        *
        * @param ids 主键ids
        * @return 删除结果
        */
        @PostMapping(&#34;/delete&#34;)
        @ApiOperation(&#34;根据Id软删除$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;List&lt;SingleResult&gt;&gt; deleteByRowIds(List&lt;Long&gt; ids) {
            List&lt;SingleResult&gt; result = new ArrayList&lt;&gt;();
            ids.forEach(x -&gt; {
                // 数据校验
                if (!$!{serviceName}.isExistById(x)) {
                    result.add(SingleResult.successBuild(x.toString()));
                } else {
                    result.add($!{serviceName}.deleteById(x));
                }
            });
        
            return BaseResult.success(result);
        }
    }


Entity


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48


$!{init.vm}
$!{define.vm}
##保存文件（宏定义）
#save(&#34;/entity$!{workPath}&#34;, &#34;.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;entity$!{workPackage}&#34;)

import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import lombok.Data;

import javax.persistence.*;
import java.io.Serializable;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
##@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-entity$!{workCommon}-$!{entityType}&#34;)
@ApiModel(value=&#34;$!{tableInfo.comment}&#34;)
@Table(name = &#34;$!{tableInfo.obj.name}&#34;)
public class $!entityType implements Serializable {

    private static final long serialVersionUID = 1L;

## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)
    
    /**
     * $!{column.comment}
     */
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Service


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service$!{workPath}&#34;, &#34;Service.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service$!{workPackage}&#34;)

$!{autoimpot.vm}

##表注释（宏定义）
#classNotes(&#34;表服务接口&#34;)
public interface $!serviceType {
	
    BaseResult&lt;PageVo&lt;$!{voType}&gt;&gt; queryByPage($!{queryType} query);
	
	BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query);

    BaseResult&lt;Object&gt; save($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!{dtoType}&gt; dtos);
	
	BaseResult&lt;Object&gt; update($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!{dtoType}&gt; dtos);

    SingleResult deleteById(Long id);
	
	boolean isExist($!{dtoType} dto);
	
    boolean isExistById(Long id);
}


ServiceImpl


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service/impl/$!{workPath}&#34;, &#34;ServiceImpl.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service.impl$!{workPackage}&#34;)

$!{autoimport.vm}
import org.apache.commons.lang3.StringUtils;
import javax.transaction.Transactional;
import $!{tableInfo.savePackageName}.entity$!{workPackage}.$!{entityType};
import javax.persistence.criteria.Predicate;

#classNotes(&#34;表服务实现类&#34;)
@Service
public class $!{serviceImplType} implements $!{serviceType} {

    @Resource
    private $!{repositoryType} $!{repositoryName};

    /**
     * 查询多条数据
     *
     * @param query 查询参数
     * @return 实例对象
     */
    @Override
    public BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query) {
		List&lt;$!{tableInfo.name}&gt; items = $!{repositoryName}.findAll(getWhereClause(query));
        return BaseResult.success(BaseConverter.convertAll(items, $!{voType}.class));
    }

    /**
     * 分页查询
     *
     * @param query 筛选条件
     * @return 查询结果
     */
    @Override
    public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; queryByPage($!{queryType} query) {
		try {
			Sort sort = Sort.by(&#34;desc&#34;.equals(query.getSortOrder()) ? Sort.Direction.DESC : Sort.Direction.ASC,
            query.getSortField());
			Pageable pageable = PageRequest.of(query.getPageNo() - 1, (query.getPageSize()), sort);
			Page&lt;$!{tableInfo.name}&gt; page = $!{repositoryName}.findAll(getWhereClause(query), pageable);
			return BaseResult.success(BaseConverter.convertPage(page, $!{voType}.class));
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;查询分页失败&#34;);
		}
    }

    /**
     * 新增数据
     *
     * @param dto dto对象
     * @return vo $!voName
     */
    @Override
    public BaseResult&lt;Object&gt; save($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 批量新增数据
     *
     * @param dtos dto对象
     * @return BaseResult
     */
    @Override
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 修改数据
     *
     * @param  dto dto对象 
     * @return BaseResult
     */
    @Override
	@Transactional
    public BaseResult&lt;Object&gt; update($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }

    /**
     * 批量修改数据
     *
     * @param dtos dto对象
     * @return 实例对象
     */
    @Override
	@Transactional
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;批量更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }


    /**
     * 通过主键删除数据
     *
     * @param id 主键
     * @return 是否成功
     */
    @Override
	@Transactional
    public SingleResult deleteById(Long id) {
		try {
			$!{repositoryName}.updateDeletedById(id);
		} catch (Exception e) {
			return SingleResult.build(id.toString(), &#34;false&#34;, &#34;删除异常&#34;);
		}
        return SingleResult.successBuild(id.toString());
    }
	
    @Override
    public boolean isExist($!{dtoType} dto) {
        Integer exist = $!{repositoryName}.isExist(dto.getName());
        return null != exist;
    }
    
    @Override
    public boolean isExistById(Long id) {
        Integer exist = $!{repositoryName}.isExistById(id);
        return null != exist;
    }
	
	private Specification&lt;$!{tableInfo.name}&gt; getWhereClause($!{queryType} query) {
        return (Specification&lt;$!{tableInfo.name}&gt;) (root, criteriaQuery, criteriaBuilder) -&gt; {
            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();
			
            if (StringUtils.isNotBlank(query.getName())) {
                predicates.add(criteriaBuilder.like(root.get(&#34;name&#34;), &#34;%&#34; &#43; query.getName() &#43; &#34;%&#34;));
            }

            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //大于等于开始时间
                predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //小于等于结束时间
                predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));
        };
    }
}


VO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/vo$!{workPath}&#34;, &#34;VO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;vo$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{voType}&#34;)
public class $!voType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)

    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


DTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;DTO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{dtoType}&#34;)
public class $!dtoType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end

## 其他列
#foreach($column in $tableInfo.otherColumn)
    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Repository JPA


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/repository/$!{workPath}&#34;, &#34;Repository.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;repository$!{workPackage}&#34;)

import com.javahik.hiklife.easycode.entity.$!{tableInfo.name};
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

##表注释（宏定义）
#classNotes(&#34;表数据库访问层&#34;)
@Repository
public interface $!{repositoryType} extends JpaRepository&lt;$!{tableInfo.name}, String&gt;, JpaSpecificationExecutor&lt;$!{tableInfo.name}&gt; {

	@Modifying
    @Query(nativeQuery = true, value = &#34;update $!{tableInfo.name} set deleted = &#39;1&#39; where id = ?1&#34;)
    void updateDeletedById(Long id);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where name = ?1 limit 1&#34;)
	Integer isExist(String name);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where id = ?1 limit 1&#34;)
	Integer isExistById(Long id);
}


QueryDTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;Query.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;查询类&#34;)
@Data
public class $!{queryType} implements Serializable {

    private static final long serialVersionUID = 1L;
       
    private Integer pageNo = 1;

    private Integer pageSize = 20;

    private String sortField = &#34;createDate&#34;;

    private String sortOrder = &#34;desc&#34;;
    
    private String createdTime;
    
    private String name;
}


Define


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46


##（Velocity宏定义）

##定义设置表名后缀的宏定义，调用方式：#setTableSuffix(&#34;Test&#34;)
#macro(setTableSuffix $suffix)
    #set($tableName = $!tool.append($tableInfo.name, $suffix))
#end

##定义设置包名后缀的宏定义，调用方式：#setPackageSuffix(&#34;Test&#34;)
#macro(setPackageSuffix $suffix)
#if($suffix!=&#34;&#34;)package #end#if($tableInfo.savePackageName!=&#34;&#34;)$!{tableInfo.savePackageName}.#{end}$!suffix;
#end

##定义直接保存路径与文件名简化的宏定义，调用方式：#save(&#34;/entity&#34;, &#34;.java&#34;)
#macro(save $path $fileName)
    $!callback.setSavePath($tool.append($tableInfo.savePath, $path))
    $!callback.setFileName($tool.append($tableInfo.name, $fileName))
#end

## 自定义entity、Mapper、Service、Api、DTO、VO的名字减少拼接，增加重用性
#set($entityType = $!tool.firstUpperCase($!tableInfo.name))
#set($entityName = $!tool.firstLowerCase($!tableInfo.name))
#set($mapperType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Mapper&#34;))
#set($mapperName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Mapper&#34;))
#set($repositoryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Repository&#34;))
#set($repositoryName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Repository&#34;))
#set($serviceType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceImplType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($serviceImplName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($apiType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Controller&#34;))
#set($apiName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Controller&#34;))
#set($dtoType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;DTO&#34;))
#set($dtoName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;DTO&#34;))
#set($queryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Query&#34;))
#set($queryName = &#34;query&#34;)
#set($voType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;VO&#34;))
#set($voName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;VO&#34;))

## 自定义类注解
#macro(classNotes $notes)
/**
 * @Description $!tableInfo.obj.name $notes
 * @Author $!author
 * @Date $!time.currTime()
 */
#end


Init


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55


##初始化区域

##去掉表的t_前缀
$!tableInfo.setName($tool.getClassName($tableInfo.obj.name.replaceFirst(&#34;tb_&#34;,&#34;&#34;)))

## 设置业务模块名
#set($index = 0)
#foreach ($element in $tableInfo.obj.name.split(&#34;_&#34;))
    #set($index = $index &#43;1)
    #if($index == 3)
        #set($work = $element)
    #end
#end

#if($!{work})
    ## 包.模块名
    #set($workPackage = $!tool.append(&#34;.&#34;,$!{work}))
    ## 路径/模块名
    #set($workPath = $!tool.append(&#34;/&#34;,$!{work}))
    ## Common-模块名
    #set($workCommon = $!tool.append(&#34;-&#34;,$!{work}))
#end

##参考阿里巴巴开发手册，POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误
#foreach($column in $tableInfo.fullColumn)
    #if($column.name.startsWith(&#34;is&#34;) &amp;&amp; $column.type.equals(&#34;java.lang.Boolean&#34;))
        $!column.setName($tool.firstLowerCase($column.name.substring(2)))
    #end
#end

##实现动态排除列
#set($temp = $tool.newHashSet(&#34;testCreateTime&#34;, &#34;otherColumn&#34;))
#foreach($item in $temp)
    #set($newList = $tool.newArrayList())
    #foreach($column in $tableInfo.fullColumn)
        #if($column.name!=$item)
            ##带有反回值的方法调用时使用$tool.call来消除返回值
            $tool.call($newList.add($column))
        #end
    #end
    ##重新保存
    $tableInfo.setFullColumn($newList)
#end

##对importList进行篡改
#set($temp = $tool.newHashSet())
#foreach($column in $tableInfo.fullColumn)
    #if(!$column.type.startsWith(&#34;java.lang.&#34;))
        ##带有反回值的方法调用时使用$tool.call来消除返回值
        $tool.call($temp.add($column.type))
    #end
#end

##覆盖
#set($importList = $temp)


autoimport


1
2
3
4


##自动导入包（仅导入实体属性需要的包，通常用于实体类）
#foreach($import in $importList)
import $!import;
#end


">
<meta name="author" content="YuanPeng11">
<link rel="canonical" href="https://isyuanpeng.github.io/posts/tool/idea&#43;easycode%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.7bdb1411b29ec9fed2b6395a081eabcb3262e7311bda855249d433c8b30a926e.css" integrity="sha256-e9sUEbKeyf7StjlaCB6ryzJi5zEb2oVSSdQzyLMKkm4=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.2eadbb982468c11a433a3e291f01326f2ba43f065e256bf792dbd79640a92316.js" integrity="sha256-Lq27mCRowRpDOj4pHwEybyukPwZeJWv3ktvXlkCpIxY="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://isyuanpeng.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://isyuanpeng.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://isyuanpeng.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://isyuanpeng.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://isyuanpeng.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.138.0">
<link rel="alternate" hreflang="en" href="https://isyuanpeng.github.io/posts/tool/idea&#43;easycode%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="IDEA&#43;EasyCode实现自动生成代码" />
<meta property="og:description" content="需求
对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。
自动生成代码的现状
目前有多种方式可以自动生成代码:


将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性


在线网站自动生成代码，使用互联网，安全性较低


IDEA&#43;groovy方法，目前了解到生成的代码比较简单，定制化程度不高


IDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成


最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。
&gt; https://gitee.com/makejava/EasyCode
Velocity(速度)语法
比较精简的一种语言，关键字不多，和代码混合使用。教程：https://www.cnblogs.com/hduwbf/p/6201731.html
EasyCode
我的模板(具有个人风格，可以进行修改使用)
Controller


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117


    ##导入宏定义
    $!{init.vm}
    $!{define.vm}

    ##保存文件（宏定义）
    #save(&#34;/controller/$!{workPath}&#34;, &#34;Controller.java&#34;)

    ##包路径（宏定义）
    #setPackageSuffix(&#34;controller$!{workPackage}&#34;)

    $!{autoImport.vm}
    import io.swagger.annotations.ApiOperation;
    import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType};
    import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType};
    import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType};
    import org.springframework.web.bind.annotation.*;
    import io.swagger.annotations.Api;
    import org.apache.commons.lang3.StringUtils;

    import javax.annotation.Resource;
    import java.util.List;

    ##表注释（宏定义）
    #classNotes(&#34;表控制层&#34;)
    @Api(tags = &#34;$!{tableInfo.comment}&#34;)
    @RestController
    @RequestMapping(&#34;$!entityName&#34;)
    public class $!apiType {

        @Resource
        private $!serviceType $!serviceName;

        /**
        * 分页查询所有数据
        *
        * @param query 查询实体
        * @return 所有数据
        */
        @PostMapping(&#34;/queryPage&#34;)
        @ApiOperation(&#34;按字段条件分页查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; query$!{entityType}ByPage(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByPage(query);
        }

        /**
        * 通过主键查询多条数据
        *
        * @param  query 查询实体
        * @return 多条数据
        */
        @PostMapping(&#34;/query&#34;)
        @ApiOperation(&#34;根据Id查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;List&lt;$!voType&gt;&gt; query(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByCondition(query);
        }

        /**
        * 新增数据
        *
        * @param dto 实体对象
        * @return 新增结果
        */
        @PostMapping(&#34;/save&#34;)
        @ApiOperation(&#34;新增$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;Object&gt; save(@RequestBody $!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            
            if ($!{serviceName}.isExist(dto)) {
                return new BaseResult&lt;&gt;(ResponseEnum.REPEAT.getCode(), ResponseEnum.REPEAT.getMessage());
            }
            
            return $!{serviceName}.save(dto);
        }
        
        
        /**
        * 修改数据
        *
        * @param dto 实体对象
        * @return 修改结果
        */
        @PostMapping(&#34;/update&#34;)
        @ApiOperation(&#34;更新$!{tableInfo.comment}&#34;)
        public BaseResult&lt;Object&gt; update($!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            return $!{serviceName}.update(dto);
        }
    
        
        /**
        * 删除多条数据
        *
        * @param ids 主键ids
        * @return 删除结果
        */
        @PostMapping(&#34;/delete&#34;)
        @ApiOperation(&#34;根据Id软删除$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;List&lt;SingleResult&gt;&gt; deleteByRowIds(List&lt;Long&gt; ids) {
            List&lt;SingleResult&gt; result = new ArrayList&lt;&gt;();
            ids.forEach(x -&gt; {
                // 数据校验
                if (!$!{serviceName}.isExistById(x)) {
                    result.add(SingleResult.successBuild(x.toString()));
                } else {
                    result.add($!{serviceName}.deleteById(x));
                }
            });
        
            return BaseResult.success(result);
        }
    }


Entity


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48


$!{init.vm}
$!{define.vm}
##保存文件（宏定义）
#save(&#34;/entity$!{workPath}&#34;, &#34;.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;entity$!{workPackage}&#34;)

import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import lombok.Data;

import javax.persistence.*;
import java.io.Serializable;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
##@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-entity$!{workCommon}-$!{entityType}&#34;)
@ApiModel(value=&#34;$!{tableInfo.comment}&#34;)
@Table(name = &#34;$!{tableInfo.obj.name}&#34;)
public class $!entityType implements Serializable {

    private static final long serialVersionUID = 1L;

## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)
    
    /**
     * $!{column.comment}
     */
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Service


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service$!{workPath}&#34;, &#34;Service.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service$!{workPackage}&#34;)

$!{autoimpot.vm}

##表注释（宏定义）
#classNotes(&#34;表服务接口&#34;)
public interface $!serviceType {
	
    BaseResult&lt;PageVo&lt;$!{voType}&gt;&gt; queryByPage($!{queryType} query);
	
	BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query);

    BaseResult&lt;Object&gt; save($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!{dtoType}&gt; dtos);
	
	BaseResult&lt;Object&gt; update($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!{dtoType}&gt; dtos);

    SingleResult deleteById(Long id);
	
	boolean isExist($!{dtoType} dto);
	
    boolean isExistById(Long id);
}


ServiceImpl


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service/impl/$!{workPath}&#34;, &#34;ServiceImpl.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service.impl$!{workPackage}&#34;)

$!{autoimport.vm}
import org.apache.commons.lang3.StringUtils;
import javax.transaction.Transactional;
import $!{tableInfo.savePackageName}.entity$!{workPackage}.$!{entityType};
import javax.persistence.criteria.Predicate;

#classNotes(&#34;表服务实现类&#34;)
@Service
public class $!{serviceImplType} implements $!{serviceType} {

    @Resource
    private $!{repositoryType} $!{repositoryName};

    /**
     * 查询多条数据
     *
     * @param query 查询参数
     * @return 实例对象
     */
    @Override
    public BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query) {
		List&lt;$!{tableInfo.name}&gt; items = $!{repositoryName}.findAll(getWhereClause(query));
        return BaseResult.success(BaseConverter.convertAll(items, $!{voType}.class));
    }

    /**
     * 分页查询
     *
     * @param query 筛选条件
     * @return 查询结果
     */
    @Override
    public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; queryByPage($!{queryType} query) {
		try {
			Sort sort = Sort.by(&#34;desc&#34;.equals(query.getSortOrder()) ? Sort.Direction.DESC : Sort.Direction.ASC,
            query.getSortField());
			Pageable pageable = PageRequest.of(query.getPageNo() - 1, (query.getPageSize()), sort);
			Page&lt;$!{tableInfo.name}&gt; page = $!{repositoryName}.findAll(getWhereClause(query), pageable);
			return BaseResult.success(BaseConverter.convertPage(page, $!{voType}.class));
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;查询分页失败&#34;);
		}
    }

    /**
     * 新增数据
     *
     * @param dto dto对象
     * @return vo $!voName
     */
    @Override
    public BaseResult&lt;Object&gt; save($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 批量新增数据
     *
     * @param dtos dto对象
     * @return BaseResult
     */
    @Override
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 修改数据
     *
     * @param  dto dto对象 
     * @return BaseResult
     */
    @Override
	@Transactional
    public BaseResult&lt;Object&gt; update($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }

    /**
     * 批量修改数据
     *
     * @param dtos dto对象
     * @return 实例对象
     */
    @Override
	@Transactional
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;批量更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }


    /**
     * 通过主键删除数据
     *
     * @param id 主键
     * @return 是否成功
     */
    @Override
	@Transactional
    public SingleResult deleteById(Long id) {
		try {
			$!{repositoryName}.updateDeletedById(id);
		} catch (Exception e) {
			return SingleResult.build(id.toString(), &#34;false&#34;, &#34;删除异常&#34;);
		}
        return SingleResult.successBuild(id.toString());
    }
	
    @Override
    public boolean isExist($!{dtoType} dto) {
        Integer exist = $!{repositoryName}.isExist(dto.getName());
        return null != exist;
    }
    
    @Override
    public boolean isExistById(Long id) {
        Integer exist = $!{repositoryName}.isExistById(id);
        return null != exist;
    }
	
	private Specification&lt;$!{tableInfo.name}&gt; getWhereClause($!{queryType} query) {
        return (Specification&lt;$!{tableInfo.name}&gt;) (root, criteriaQuery, criteriaBuilder) -&gt; {
            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();
			
            if (StringUtils.isNotBlank(query.getName())) {
                predicates.add(criteriaBuilder.like(root.get(&#34;name&#34;), &#34;%&#34; &#43; query.getName() &#43; &#34;%&#34;));
            }

            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //大于等于开始时间
                predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //小于等于结束时间
                predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));
        };
    }
}


VO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/vo$!{workPath}&#34;, &#34;VO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;vo$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{voType}&#34;)
public class $!voType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)

    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


DTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;DTO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{dtoType}&#34;)
public class $!dtoType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end

## 其他列
#foreach($column in $tableInfo.otherColumn)
    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Repository JPA


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/repository/$!{workPath}&#34;, &#34;Repository.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;repository$!{workPackage}&#34;)

import com.javahik.hiklife.easycode.entity.$!{tableInfo.name};
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

##表注释（宏定义）
#classNotes(&#34;表数据库访问层&#34;)
@Repository
public interface $!{repositoryType} extends JpaRepository&lt;$!{tableInfo.name}, String&gt;, JpaSpecificationExecutor&lt;$!{tableInfo.name}&gt; {

	@Modifying
    @Query(nativeQuery = true, value = &#34;update $!{tableInfo.name} set deleted = &#39;1&#39; where id = ?1&#34;)
    void updateDeletedById(Long id);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where name = ?1 limit 1&#34;)
	Integer isExist(String name);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where id = ?1 limit 1&#34;)
	Integer isExistById(Long id);
}


QueryDTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;Query.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;查询类&#34;)
@Data
public class $!{queryType} implements Serializable {

    private static final long serialVersionUID = 1L;
       
    private Integer pageNo = 1;

    private Integer pageSize = 20;

    private String sortField = &#34;createDate&#34;;

    private String sortOrder = &#34;desc&#34;;
    
    private String createdTime;
    
    private String name;
}


Define


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46


##（Velocity宏定义）

##定义设置表名后缀的宏定义，调用方式：#setTableSuffix(&#34;Test&#34;)
#macro(setTableSuffix $suffix)
    #set($tableName = $!tool.append($tableInfo.name, $suffix))
#end

##定义设置包名后缀的宏定义，调用方式：#setPackageSuffix(&#34;Test&#34;)
#macro(setPackageSuffix $suffix)
#if($suffix!=&#34;&#34;)package #end#if($tableInfo.savePackageName!=&#34;&#34;)$!{tableInfo.savePackageName}.#{end}$!suffix;
#end

##定义直接保存路径与文件名简化的宏定义，调用方式：#save(&#34;/entity&#34;, &#34;.java&#34;)
#macro(save $path $fileName)
    $!callback.setSavePath($tool.append($tableInfo.savePath, $path))
    $!callback.setFileName($tool.append($tableInfo.name, $fileName))
#end

## 自定义entity、Mapper、Service、Api、DTO、VO的名字减少拼接，增加重用性
#set($entityType = $!tool.firstUpperCase($!tableInfo.name))
#set($entityName = $!tool.firstLowerCase($!tableInfo.name))
#set($mapperType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Mapper&#34;))
#set($mapperName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Mapper&#34;))
#set($repositoryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Repository&#34;))
#set($repositoryName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Repository&#34;))
#set($serviceType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceImplType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($serviceImplName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($apiType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Controller&#34;))
#set($apiName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Controller&#34;))
#set($dtoType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;DTO&#34;))
#set($dtoName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;DTO&#34;))
#set($queryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Query&#34;))
#set($queryName = &#34;query&#34;)
#set($voType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;VO&#34;))
#set($voName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;VO&#34;))

## 自定义类注解
#macro(classNotes $notes)
/**
 * @Description $!tableInfo.obj.name $notes
 * @Author $!author
 * @Date $!time.currTime()
 */
#end


Init


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55


##初始化区域

##去掉表的t_前缀
$!tableInfo.setName($tool.getClassName($tableInfo.obj.name.replaceFirst(&#34;tb_&#34;,&#34;&#34;)))

## 设置业务模块名
#set($index = 0)
#foreach ($element in $tableInfo.obj.name.split(&#34;_&#34;))
    #set($index = $index &#43;1)
    #if($index == 3)
        #set($work = $element)
    #end
#end

#if($!{work})
    ## 包.模块名
    #set($workPackage = $!tool.append(&#34;.&#34;,$!{work}))
    ## 路径/模块名
    #set($workPath = $!tool.append(&#34;/&#34;,$!{work}))
    ## Common-模块名
    #set($workCommon = $!tool.append(&#34;-&#34;,$!{work}))
#end

##参考阿里巴巴开发手册，POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误
#foreach($column in $tableInfo.fullColumn)
    #if($column.name.startsWith(&#34;is&#34;) &amp;&amp; $column.type.equals(&#34;java.lang.Boolean&#34;))
        $!column.setName($tool.firstLowerCase($column.name.substring(2)))
    #end
#end

##实现动态排除列
#set($temp = $tool.newHashSet(&#34;testCreateTime&#34;, &#34;otherColumn&#34;))
#foreach($item in $temp)
    #set($newList = $tool.newArrayList())
    #foreach($column in $tableInfo.fullColumn)
        #if($column.name!=$item)
            ##带有反回值的方法调用时使用$tool.call来消除返回值
            $tool.call($newList.add($column))
        #end
    #end
    ##重新保存
    $tableInfo.setFullColumn($newList)
#end

##对importList进行篡改
#set($temp = $tool.newHashSet())
#foreach($column in $tableInfo.fullColumn)
    #if(!$column.type.startsWith(&#34;java.lang.&#34;))
        ##带有反回值的方法调用时使用$tool.call来消除返回值
        $tool.call($temp.add($column.type))
    #end
#end

##覆盖
#set($importList = $temp)


autoimport


1
2
3
4


##自动导入包（仅导入实体属性需要的包，通常用于实体类）
#foreach($import in $importList)
import $!import;
#end


" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://isyuanpeng.github.io/posts/tool/idea&#43;easycode%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/" /><meta property="og:image" content="https://isyuanpeng.github.io/papermod-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-12T15:12:48&#43;08:00" />
<meta property="article:modified_time" content="2022-02-12T15:12:48&#43;08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://isyuanpeng.github.io/papermod-cover.png"/>

<meta name="twitter:title" content="IDEA&#43;EasyCode实现自动生成代码"/>
<meta name="twitter:description" content="需求
对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。
自动生成代码的现状
目前有多种方式可以自动生成代码:


将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性


在线网站自动生成代码，使用互联网，安全性较低


IDEA&#43;groovy方法，目前了解到生成的代码比较简单，定制化程度不高


IDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成


最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。
&gt; https://gitee.com/makejava/EasyCode
Velocity(速度)语法
比较精简的一种语言，关键字不多，和代码混合使用。教程：https://www.cnblogs.com/hduwbf/p/6201731.html
EasyCode
我的模板(具有个人风格，可以进行修改使用)
Controller


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117


    ##导入宏定义
    $!{init.vm}
    $!{define.vm}

    ##保存文件（宏定义）
    #save(&#34;/controller/$!{workPath}&#34;, &#34;Controller.java&#34;)

    ##包路径（宏定义）
    #setPackageSuffix(&#34;controller$!{workPackage}&#34;)

    $!{autoImport.vm}
    import io.swagger.annotations.ApiOperation;
    import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType};
    import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType};
    import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType};
    import org.springframework.web.bind.annotation.*;
    import io.swagger.annotations.Api;
    import org.apache.commons.lang3.StringUtils;

    import javax.annotation.Resource;
    import java.util.List;

    ##表注释（宏定义）
    #classNotes(&#34;表控制层&#34;)
    @Api(tags = &#34;$!{tableInfo.comment}&#34;)
    @RestController
    @RequestMapping(&#34;$!entityName&#34;)
    public class $!apiType {

        @Resource
        private $!serviceType $!serviceName;

        /**
        * 分页查询所有数据
        *
        * @param query 查询实体
        * @return 所有数据
        */
        @PostMapping(&#34;/queryPage&#34;)
        @ApiOperation(&#34;按字段条件分页查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; query$!{entityType}ByPage(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByPage(query);
        }

        /**
        * 通过主键查询多条数据
        *
        * @param  query 查询实体
        * @return 多条数据
        */
        @PostMapping(&#34;/query&#34;)
        @ApiOperation(&#34;根据Id查询$!{tableInfo.comment}&#34;)
        public BaseResult&lt;List&lt;$!voType&gt;&gt; query(@RequestBody $!{queryType} query) {
            return $!{serviceName}.queryByCondition(query);
        }

        /**
        * 新增数据
        *
        * @param dto 实体对象
        * @return 新增结果
        */
        @PostMapping(&#34;/save&#34;)
        @ApiOperation(&#34;新增$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;Object&gt; save(@RequestBody $!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            
            if ($!{serviceName}.isExist(dto)) {
                return new BaseResult&lt;&gt;(ResponseEnum.REPEAT.getCode(), ResponseEnum.REPEAT.getMessage());
            }
            
            return $!{serviceName}.save(dto);
        }
        
        
        /**
        * 修改数据
        *
        * @param dto 实体对象
        * @return 修改结果
        */
        @PostMapping(&#34;/update&#34;)
        @ApiOperation(&#34;更新$!{tableInfo.comment}&#34;)
        public BaseResult&lt;Object&gt; update($!{dtoType} dto) {
            //数据校验
            if (StringUtils.isBlank(dto.getName())) {
                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
            }
            return $!{serviceName}.update(dto);
        }
    
        
        /**
        * 删除多条数据
        *
        * @param ids 主键ids
        * @return 删除结果
        */
        @PostMapping(&#34;/delete&#34;)
        @ApiOperation(&#34;根据Id软删除$!{tableInfo.comment}数据&#34;)
        public BaseResult&lt;List&lt;SingleResult&gt;&gt; deleteByRowIds(List&lt;Long&gt; ids) {
            List&lt;SingleResult&gt; result = new ArrayList&lt;&gt;();
            ids.forEach(x -&gt; {
                // 数据校验
                if (!$!{serviceName}.isExistById(x)) {
                    result.add(SingleResult.successBuild(x.toString()));
                } else {
                    result.add($!{serviceName}.deleteById(x));
                }
            });
        
            return BaseResult.success(result);
        }
    }


Entity


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48


$!{init.vm}
$!{define.vm}
##保存文件（宏定义）
#save(&#34;/entity$!{workPath}&#34;, &#34;.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;entity$!{workPackage}&#34;)

import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import lombok.Data;

import javax.persistence.*;
import java.io.Serializable;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
##@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-entity$!{workCommon}-$!{entityType}&#34;)
@ApiModel(value=&#34;$!{tableInfo.comment}&#34;)
@Table(name = &#34;$!{tableInfo.obj.name}&#34;)
public class $!entityType implements Serializable {

    private static final long serialVersionUID = 1L;

## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)
    
    /**
     * $!{column.comment}
     */
    @Column(name = &#34;$!{column.obj.name}&#34;)
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Service


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service$!{workPath}&#34;, &#34;Service.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service$!{workPackage}&#34;)

$!{autoimpot.vm}

##表注释（宏定义）
#classNotes(&#34;表服务接口&#34;)
public interface $!serviceType {
	
    BaseResult&lt;PageVo&lt;$!{voType}&gt;&gt; queryByPage($!{queryType} query);
	
	BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query);

    BaseResult&lt;Object&gt; save($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!{dtoType}&gt; dtos);
	
	BaseResult&lt;Object&gt; update($!{dtoType} dto);

    BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!{dtoType}&gt; dtos);

    SingleResult deleteById(Long id);
	
	boolean isExist($!{dtoType} dto);
	
    boolean isExistById(Long id);
}


ServiceImpl


  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/service/impl/$!{workPath}&#34;, &#34;ServiceImpl.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;service.impl$!{workPackage}&#34;)

$!{autoimport.vm}
import org.apache.commons.lang3.StringUtils;
import javax.transaction.Transactional;
import $!{tableInfo.savePackageName}.entity$!{workPackage}.$!{entityType};
import javax.persistence.criteria.Predicate;

#classNotes(&#34;表服务实现类&#34;)
@Service
public class $!{serviceImplType} implements $!{serviceType} {

    @Resource
    private $!{repositoryType} $!{repositoryName};

    /**
     * 查询多条数据
     *
     * @param query 查询参数
     * @return 实例对象
     */
    @Override
    public BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query) {
		List&lt;$!{tableInfo.name}&gt; items = $!{repositoryName}.findAll(getWhereClause(query));
        return BaseResult.success(BaseConverter.convertAll(items, $!{voType}.class));
    }

    /**
     * 分页查询
     *
     * @param query 筛选条件
     * @return 查询结果
     */
    @Override
    public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; queryByPage($!{queryType} query) {
		try {
			Sort sort = Sort.by(&#34;desc&#34;.equals(query.getSortOrder()) ? Sort.Direction.DESC : Sort.Direction.ASC,
            query.getSortField());
			Pageable pageable = PageRequest.of(query.getPageNo() - 1, (query.getPageSize()), sort);
			Page&lt;$!{tableInfo.name}&gt; page = $!{repositoryName}.findAll(getWhereClause(query), pageable);
			return BaseResult.success(BaseConverter.convertPage(page, $!{voType}.class));
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;查询分页失败&#34;);
		}
    }

    /**
     * 新增数据
     *
     * @param dto dto对象
     * @return vo $!voName
     */
    @Override
    public BaseResult&lt;Object&gt; save($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 批量新增数据
     *
     * @param dtos dto对象
     * @return BaseResult
     */
    @Override
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }
	
	/**
     * 修改数据
     *
     * @param  dto dto对象 
     * @return BaseResult
     */
    @Override
	@Transactional
    public BaseResult&lt;Object&gt; update($!dtoType dto) {
        try {
			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
			$!{repositoryName}.save(entity);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }

    /**
     * 批量修改数据
     *
     * @param dtos dto对象
     * @return 实例对象
     */
    @Override
	@Transactional
    public BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!dtoType&gt; dtos) {
        try {
			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
			$!{repositoryName}.saveAll(entitys);
		} catch (Exception e) {
			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;批量更新失败&#34;);
		}
        return new BaseResult&lt;&gt;();
    }


    /**
     * 通过主键删除数据
     *
     * @param id 主键
     * @return 是否成功
     */
    @Override
	@Transactional
    public SingleResult deleteById(Long id) {
		try {
			$!{repositoryName}.updateDeletedById(id);
		} catch (Exception e) {
			return SingleResult.build(id.toString(), &#34;false&#34;, &#34;删除异常&#34;);
		}
        return SingleResult.successBuild(id.toString());
    }
	
    @Override
    public boolean isExist($!{dtoType} dto) {
        Integer exist = $!{repositoryName}.isExist(dto.getName());
        return null != exist;
    }
    
    @Override
    public boolean isExistById(Long id) {
        Integer exist = $!{repositoryName}.isExistById(id);
        return null != exist;
    }
	
	private Specification&lt;$!{tableInfo.name}&gt; getWhereClause($!{queryType} query) {
        return (Specification&lt;$!{tableInfo.name}&gt;) (root, criteriaQuery, criteriaBuilder) -&gt; {
            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();
			
            if (StringUtils.isNotBlank(query.getName())) {
                predicates.add(criteriaBuilder.like(root.get(&#34;name&#34;), &#34;%&#34; &#43; query.getName() &#43; &#34;%&#34;));
            }

            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //大于等于开始时间
                predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
                //小于等于结束时间
                predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
            }
            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));
        };
    }
}


VO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/vo$!{workPath}&#34;, &#34;VO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;vo$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{voType}&#34;)
public class $!voType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end
## 其他列
#foreach($column in $tableInfo.otherColumn)

    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


DTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;DTO.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;&#34;)
@Data
@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-dto$!{workCommon}-$!{dtoType}&#34;)
public class $!dtoType implements Serializable {

    private static final long serialVersionUID = 1L;
    
## 主键列
#foreach($column in $tableInfo.pkColumn)
    /**
     * $!column.comment
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($column.type) $!column.name;
#end

## 其他列
#foreach($column in $tableInfo.otherColumn)
    /**
     * $!{column.comment}
     */
    @ApiModelProperty(value = &#34;$!column.comment&#34;)
    private $!tool.getClsNameByFullName($!column.type) $!column.name;
#end
}


Repository JPA


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32


##导入宏定义
$!{init.vm}
$!{define.vm}

##保存文件（宏定义）
#save(&#34;/repository/$!{workPath}&#34;, &#34;Repository.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;repository$!{workPackage}&#34;)

import com.javahik.hiklife.easycode.entity.$!{tableInfo.name};
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;

##表注释（宏定义）
#classNotes(&#34;表数据库访问层&#34;)
@Repository
public interface $!{repositoryType} extends JpaRepository&lt;$!{tableInfo.name}, String&gt;, JpaSpecificationExecutor&lt;$!{tableInfo.name}&gt; {

	@Modifying
    @Query(nativeQuery = true, value = &#34;update $!{tableInfo.name} set deleted = &#39;1&#39; where id = ?1&#34;)
    void updateDeletedById(Long id);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where name = ?1 limit 1&#34;)
	Integer isExist(String name);
	
	@Query(nativeQuery = true, value = &#34;select 1 from $!{tableInfo.name} where id = ?1 limit 1&#34;)
	Integer isExistById(Long id);
}


QueryDTO


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36


$!{init.vm}
$!{define.vm}

##保存文件
#save(&#34;/dto$!{workPath}&#34;, &#34;Query.java&#34;)

##包路径（宏定义）
#setPackageSuffix(&#34;dto$!{workPackage}&#34;)

##自动导入包（全局变量）
$!{autoImport.vm}
import io.swagger.annotations.ApiModel;
import io.swagger.annotations.ApiModelProperty;
import java.io.Serializable;
import lombok.Data;
import java.util.Date;

##表注释（宏定义）
#classNotes(&#34;查询类&#34;)
@Data
public class $!{queryType} implements Serializable {

    private static final long serialVersionUID = 1L;
       
    private Integer pageNo = 1;

    private Integer pageSize = 20;

    private String sortField = &#34;createDate&#34;;

    private String sortOrder = &#34;desc&#34;;
    
    private String createdTime;
    
    private String name;
}


Define


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46


##（Velocity宏定义）

##定义设置表名后缀的宏定义，调用方式：#setTableSuffix(&#34;Test&#34;)
#macro(setTableSuffix $suffix)
    #set($tableName = $!tool.append($tableInfo.name, $suffix))
#end

##定义设置包名后缀的宏定义，调用方式：#setPackageSuffix(&#34;Test&#34;)
#macro(setPackageSuffix $suffix)
#if($suffix!=&#34;&#34;)package #end#if($tableInfo.savePackageName!=&#34;&#34;)$!{tableInfo.savePackageName}.#{end}$!suffix;
#end

##定义直接保存路径与文件名简化的宏定义，调用方式：#save(&#34;/entity&#34;, &#34;.java&#34;)
#macro(save $path $fileName)
    $!callback.setSavePath($tool.append($tableInfo.savePath, $path))
    $!callback.setFileName($tool.append($tableInfo.name, $fileName))
#end

## 自定义entity、Mapper、Service、Api、DTO、VO的名字减少拼接，增加重用性
#set($entityType = $!tool.firstUpperCase($!tableInfo.name))
#set($entityName = $!tool.firstLowerCase($!tableInfo.name))
#set($mapperType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Mapper&#34;))
#set($mapperName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Mapper&#34;))
#set($repositoryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Repository&#34;))
#set($repositoryName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Repository&#34;))
#set($serviceType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Service&#34;))
#set($serviceImplType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($serviceImplName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;ServiceImpl&#34;))
#set($apiType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Controller&#34;))
#set($apiName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Controller&#34;))
#set($dtoType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;DTO&#34;))
#set($dtoName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;DTO&#34;))
#set($queryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Query&#34;))
#set($queryName = &#34;query&#34;)
#set($voType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;VO&#34;))
#set($voName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;VO&#34;))

## 自定义类注解
#macro(classNotes $notes)
/**
 * @Description $!tableInfo.obj.name $notes
 * @Author $!author
 * @Date $!time.currTime()
 */
#end


Init


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55


##初始化区域

##去掉表的t_前缀
$!tableInfo.setName($tool.getClassName($tableInfo.obj.name.replaceFirst(&#34;tb_&#34;,&#34;&#34;)))

## 设置业务模块名
#set($index = 0)
#foreach ($element in $tableInfo.obj.name.split(&#34;_&#34;))
    #set($index = $index &#43;1)
    #if($index == 3)
        #set($work = $element)
    #end
#end

#if($!{work})
    ## 包.模块名
    #set($workPackage = $!tool.append(&#34;.&#34;,$!{work}))
    ## 路径/模块名
    #set($workPath = $!tool.append(&#34;/&#34;,$!{work}))
    ## Common-模块名
    #set($workCommon = $!tool.append(&#34;-&#34;,$!{work}))
#end

##参考阿里巴巴开发手册，POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误
#foreach($column in $tableInfo.fullColumn)
    #if($column.name.startsWith(&#34;is&#34;) &amp;&amp; $column.type.equals(&#34;java.lang.Boolean&#34;))
        $!column.setName($tool.firstLowerCase($column.name.substring(2)))
    #end
#end

##实现动态排除列
#set($temp = $tool.newHashSet(&#34;testCreateTime&#34;, &#34;otherColumn&#34;))
#foreach($item in $temp)
    #set($newList = $tool.newArrayList())
    #foreach($column in $tableInfo.fullColumn)
        #if($column.name!=$item)
            ##带有反回值的方法调用时使用$tool.call来消除返回值
            $tool.call($newList.add($column))
        #end
    #end
    ##重新保存
    $tableInfo.setFullColumn($newList)
#end

##对importList进行篡改
#set($temp = $tool.newHashSet())
#foreach($column in $tableInfo.fullColumn)
    #if(!$column.type.startsWith(&#34;java.lang.&#34;))
        ##带有反回值的方法调用时使用$tool.call来消除返回值
        $tool.call($temp.add($column.type))
    #end
#end

##覆盖
#set($importList = $temp)


autoimport


1
2
3
4


##自动导入包（仅导入实体属性需要的包，通常用于实体类）
#foreach($import in $importList)
import $!import;
#end


"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://isyuanpeng.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "IDEA+EasyCode实现自动生成代码",
      "item": "https://isyuanpeng.github.io/posts/tool/idea+easycode%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "IDEA+EasyCode实现自动生成代码",
  "name": "IDEA\u002bEasyCode实现自动生成代码",
  "description": "需求 对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。\n自动生成代码的现状 目前有多种方式可以自动生成代码:\n将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性\n在线网站自动生成代码，使用互联网，安全性较低\nIDEA+groovy方法，目前了解到生成的代码比较简单，定制化程度不高\nIDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成\n最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。 \u0026gt; https://gitee.com/makejava/EasyCode\nVelocity(速度)语法 比较精简的一种语言，关键字不多，和代码混合使用。教程：https://www.cnblogs.com/hduwbf/p/6201731.html\nEasyCode 我的模板(具有个人风格，可以进行修改使用) Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 ##导入宏定义 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\u0026#34;/controller/$!{workPath}\u0026#34;, \u0026#34;Controller.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;controller$!{workPackage}\u0026#34;) $!{autoImport.vm} import io.swagger.annotations.ApiOperation; import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType}; import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType}; import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType}; import org.springframework.web.bind.annotation.*; import io.swagger.annotations.Api; import org.apache.commons.lang3.StringUtils; import javax.annotation.Resource; import java.util.List; ##表注释（宏定义） #classNotes(\u0026#34;表控制层\u0026#34;) @Api(tags = \u0026#34;$!{tableInfo.comment}\u0026#34;) @RestController @RequestMapping(\u0026#34;$!entityName\u0026#34;) public class $!apiType { @Resource private $!serviceType $!serviceName; /** * 分页查询所有数据 * * @param query 查询实体 * @return 所有数据 */ @PostMapping(\u0026#34;/queryPage\u0026#34;) @ApiOperation(\u0026#34;按字段条件分页查询$!{tableInfo.comment}\u0026#34;) public BaseResult\u0026lt;PageVo\u0026lt;$!voType\u0026gt;\u0026gt; query$!{entityType}ByPage(@RequestBody $!{queryType} query) { return $!{serviceName}.queryByPage(query); } /** * 通过主键查询多条数据 * * @param query 查询实体 * @return 多条数据 */ @PostMapping(\u0026#34;/query\u0026#34;) @ApiOperation(\u0026#34;根据Id查询$!{tableInfo.comment}\u0026#34;) public BaseResult\u0026lt;List\u0026lt;$!voType\u0026gt;\u0026gt; query(@RequestBody $!{queryType} query) { return $!{serviceName}.queryByCondition(query); } /** * 新增数据 * * @param dto 实体对象 * @return 新增结果 */ @PostMapping(\u0026#34;/save\u0026#34;) @ApiOperation(\u0026#34;新增$!{tableInfo.comment}数据\u0026#34;) public BaseResult\u0026lt;Object\u0026gt; save(@RequestBody $!{dtoType} dto) { //数据校验 if (StringUtils.isBlank(dto.getName())) { return new BaseResult\u0026lt;\u0026gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage()); } if ($!{serviceName}.isExist(dto)) { return new BaseResult\u0026lt;\u0026gt;(ResponseEnum.REPEAT.getCode(), ResponseEnum.REPEAT.getMessage()); } return $!{serviceName}.save(dto); } /** * 修改数据 * * @param dto 实体对象 * @return 修改结果 */ @PostMapping(\u0026#34;/update\u0026#34;) @ApiOperation(\u0026#34;更新$!{tableInfo.comment}\u0026#34;) public BaseResult\u0026lt;Object\u0026gt; update($!{dtoType} dto) { //数据校验 if (StringUtils.isBlank(dto.getName())) { return new BaseResult\u0026lt;\u0026gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage()); } return $!{serviceName}.update(dto); } /** * 删除多条数据 * * @param ids 主键ids * @return 删除结果 */ @PostMapping(\u0026#34;/delete\u0026#34;) @ApiOperation(\u0026#34;根据Id软删除$!{tableInfo.comment}数据\u0026#34;) public BaseResult\u0026lt;List\u0026lt;SingleResult\u0026gt;\u0026gt; deleteByRowIds(List\u0026lt;Long\u0026gt; ids) { List\u0026lt;SingleResult\u0026gt; result = new ArrayList\u0026lt;\u0026gt;(); ids.forEach(x -\u0026gt; { // 数据校验 if (!$!{serviceName}.isExistById(x)) { result.add(SingleResult.successBuild(x.toString())); } else { result.add($!{serviceName}.deleteById(x)); } }); return BaseResult.success(result); } } Entity 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\u0026#34;/entity$!{workPath}\u0026#34;, \u0026#34;.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;entity$!{workPackage}\u0026#34;) import io.swagger.annotations.ApiModel; import io.swagger.annotations.ApiModelProperty; import lombok.Data; import javax.persistence.*; import java.io.Serializable; import java.util.Date; ##表注释（宏定义） #classNotes(\u0026#34;\u0026#34;) @Data ##@ApiModel(value=\u0026#34;$tableInfo.savePackageName.replace(\u0026#34;.\u0026#34;,\u0026#34;-\u0026#34;)-entity$!{workCommon}-$!{entityType}\u0026#34;) @ApiModel(value=\u0026#34;$!{tableInfo.comment}\u0026#34;) @Table(name = \u0026#34;$!{tableInfo.obj.name}\u0026#34;) public class $!entityType implements Serializable { private static final long serialVersionUID = 1L; ## 主键列 #foreach($column in $tableInfo.pkColumn) /** * $!column.comment */ @Id @GeneratedValue(strategy=GenerationType.IDENTITY) @Column(name = \u0026#34;$!{column.obj.name}\u0026#34;) @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($column.type) $!column.name; #end ## 其他列 #foreach($column in $tableInfo.otherColumn) /** * $!{column.comment} */ @Column(name = \u0026#34;$!{column.obj.name}\u0026#34;) @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($!column.type) $!column.name; #end } Service 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 ##导入宏定义 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\u0026#34;/service$!{workPath}\u0026#34;, \u0026#34;Service.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;service$!{workPackage}\u0026#34;) $!{autoimpot.vm} ##表注释（宏定义） #classNotes(\u0026#34;表服务接口\u0026#34;) public interface $!serviceType { BaseResult\u0026lt;PageVo\u0026lt;$!{voType}\u0026gt;\u0026gt; queryByPage($!{queryType} query); BaseResult\u0026lt;List\u0026lt;$!{voType}\u0026gt;\u0026gt; queryByCondition($!{queryType} query); BaseResult\u0026lt;Object\u0026gt; save($!{dtoType} dto); BaseResult\u0026lt;List\u0026lt;SingleResult\u0026gt;\u0026gt; saveBatch(List\u0026lt;$!{dtoType}\u0026gt; dtos); BaseResult\u0026lt;Object\u0026gt; update($!{dtoType} dto); BaseResult\u0026lt;List\u0026lt;SingleResult\u0026gt;\u0026gt; updateBatch(List\u0026lt;$!{dtoType}\u0026gt; dtos); SingleResult deleteById(Long id); boolean isExist($!{dtoType} dto); boolean isExistById(Long id); } ServiceImpl 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 ##导入宏定义 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\u0026#34;/service/impl/$!{workPath}\u0026#34;, \u0026#34;ServiceImpl.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;service.impl$!{workPackage}\u0026#34;) $!{autoimport.vm} import org.apache.commons.lang3.StringUtils; import javax.transaction.Transactional; import $!{tableInfo.savePackageName}.entity$!{workPackage}.$!{entityType}; import javax.persistence.criteria.Predicate; #classNotes(\u0026#34;表服务实现类\u0026#34;) @Service public class $!{serviceImplType} implements $!{serviceType} { @Resource private $!{repositoryType} $!{repositoryName}; /** * 查询多条数据 * * @param query 查询参数 * @return 实例对象 */ @Override public BaseResult\u0026lt;List\u0026lt;$!{voType}\u0026gt;\u0026gt; queryByCondition($!{queryType} query) { List\u0026lt;$!{tableInfo.name}\u0026gt; items = $!{repositoryName}.findAll(getWhereClause(query)); return BaseResult.success(BaseConverter.convertAll(items, $!{voType}.class)); } /** * 分页查询 * * @param query 筛选条件 * @return 查询结果 */ @Override public BaseResult\u0026lt;PageVo\u0026lt;$!voType\u0026gt;\u0026gt; queryByPage($!{queryType} query) { try { Sort sort = Sort.by(\u0026#34;desc\u0026#34;.equals(query.getSortOrder()) ? Sort.Direction.DESC : Sort.Direction.ASC, query.getSortField()); Pageable pageable = PageRequest.of(query.getPageNo() - 1, (query.getPageSize()), sort); Page\u0026lt;$!{tableInfo.name}\u0026gt; page = $!{repositoryName}.findAll(getWhereClause(query), pageable); return BaseResult.success(BaseConverter.convertPage(page, $!{voType}.class)); } catch (Exception e) { return new BaseResult\u0026lt;\u0026gt;(\u0026#34;-1\u0026#34;, \u0026#34;查询分页失败\u0026#34;); } } /** * 新增数据 * * @param dto dto对象 * @return vo $!voName */ @Override public BaseResult\u0026lt;Object\u0026gt; save($!dtoType dto) { try { $!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class); $!{repositoryName}.save(entity); } catch (Exception e) { return new BaseResult\u0026lt;\u0026gt;(\u0026#34;-1\u0026#34;, \u0026#34;保存失败\u0026#34;); } return new BaseResult\u0026lt;\u0026gt;(); } /** * 批量新增数据 * * @param dtos dto对象 * @return BaseResult */ @Override public BaseResult\u0026lt;List\u0026lt;SingleResult\u0026gt;\u0026gt; saveBatch(List\u0026lt;$!dtoType\u0026gt; dtos) { try { List\u0026lt;$!{tableInfo.name}\u0026gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class); $!{repositoryName}.saveAll(entitys); } catch (Exception e) { return new BaseResult\u0026lt;\u0026gt;(\u0026#34;-1\u0026#34;, \u0026#34;保存失败\u0026#34;); } return new BaseResult\u0026lt;\u0026gt;(); } /** * 修改数据 * * @param dto dto对象 * @return BaseResult */ @Override @Transactional public BaseResult\u0026lt;Object\u0026gt; update($!dtoType dto) { try { $!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class); $!{repositoryName}.save(entity); } catch (Exception e) { return new BaseResult\u0026lt;\u0026gt;(\u0026#34;-1\u0026#34;, \u0026#34;更新失败\u0026#34;); } return new BaseResult\u0026lt;\u0026gt;(); } /** * 批量修改数据 * * @param dtos dto对象 * @return 实例对象 */ @Override @Transactional public BaseResult\u0026lt;List\u0026lt;SingleResult\u0026gt;\u0026gt; updateBatch(List\u0026lt;$!dtoType\u0026gt; dtos) { try { List\u0026lt;$!{tableInfo.name}\u0026gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class); $!{repositoryName}.saveAll(entitys); } catch (Exception e) { return new BaseResult\u0026lt;\u0026gt;(\u0026#34;-1\u0026#34;, \u0026#34;批量更新失败\u0026#34;); } return new BaseResult\u0026lt;\u0026gt;(); } /** * 通过主键删除数据 * * @param id 主键 * @return 是否成功 */ @Override @Transactional public SingleResult deleteById(Long id) { try { $!{repositoryName}.updateDeletedById(id); } catch (Exception e) { return SingleResult.build(id.toString(), \u0026#34;false\u0026#34;, \u0026#34;删除异常\u0026#34;); } return SingleResult.successBuild(id.toString()); } @Override public boolean isExist($!{dtoType} dto) { Integer exist = $!{repositoryName}.isExist(dto.getName()); return null != exist; } @Override public boolean isExistById(Long id) { Integer exist = $!{repositoryName}.isExistById(id); return null != exist; } private Specification\u0026lt;$!{tableInfo.name}\u0026gt; getWhereClause($!{queryType} query) { return (Specification\u0026lt;$!{tableInfo.name}\u0026gt;) (root, criteriaQuery, criteriaBuilder) -\u0026gt; { List\u0026lt;Predicate\u0026gt; predicates = new ArrayList\u0026lt;\u0026gt;(); if (StringUtils.isNotBlank(query.getName())) { predicates.add(criteriaBuilder.like(root.get(\u0026#34;name\u0026#34;), \u0026#34;%\u0026#34; + query.getName() + \u0026#34;%\u0026#34;)); } if (ObjectUtils.isNotEmpty(query.getCreatedTime())) { //大于等于开始时间 predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(\u0026#34;createTime\u0026#34;), DateUtil.parse(query.getCreatedTime()))); } if (ObjectUtils.isNotEmpty(query.getCreatedTime())) { //小于等于结束时间 predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(\u0026#34;createTime\u0026#34;), DateUtil.parse(query.getCreatedTime()))); } return criteriaBuilder.and(predicates.toArray(new Predicate[0])); }; } } VO 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 $!{init.vm} $!{define.vm} ##保存文件 #save(\u0026#34;/vo$!{workPath}\u0026#34;, \u0026#34;VO.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;vo$!{workPackage}\u0026#34;) ##自动导入包（全局变量） $!{autoImport.vm} import java.util.Date; ##表注释（宏定义） #classNotes(\u0026#34;\u0026#34;) @Data @ApiModel(value=\u0026#34;$tableInfo.savePackageName.replace(\u0026#34;.\u0026#34;,\u0026#34;-\u0026#34;)-dto$!{workCommon}-$!{voType}\u0026#34;) public class $!voType implements Serializable { private static final long serialVersionUID = 1L; ## 主键列 #foreach($column in $tableInfo.pkColumn) /** * $!column.comment */ @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($column.type) $!column.name; #end ## 其他列 #foreach($column in $tableInfo.otherColumn) /** * $!{column.comment} */ @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($!column.type) $!column.name; #end } DTO 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 $!{init.vm} $!{define.vm} ##保存文件 #save(\u0026#34;/dto$!{workPath}\u0026#34;, \u0026#34;DTO.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;dto$!{workPackage}\u0026#34;) ##自动导入包（全局变量） $!{autoImport.vm} import io.swagger.annotations.ApiModel; import io.swagger.annotations.ApiModelProperty; import java.io.Serializable; import lombok.Data; import java.util.Date; ##表注释（宏定义） #classNotes(\u0026#34;\u0026#34;) @Data @ApiModel(value=\u0026#34;$tableInfo.savePackageName.replace(\u0026#34;.\u0026#34;,\u0026#34;-\u0026#34;)-dto$!{workCommon}-$!{dtoType}\u0026#34;) public class $!dtoType implements Serializable { private static final long serialVersionUID = 1L; ## 主键列 #foreach($column in $tableInfo.pkColumn) /** * $!column.comment */ @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($column.type) $!column.name; #end ## 其他列 #foreach($column in $tableInfo.otherColumn) /** * $!{column.comment} */ @ApiModelProperty(value = \u0026#34;$!column.comment\u0026#34;) private $!tool.getClsNameByFullName($!column.type) $!column.name; #end } Repository JPA 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 ##导入宏定义 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\u0026#34;/repository/$!{workPath}\u0026#34;, \u0026#34;Repository.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;repository$!{workPackage}\u0026#34;) import com.javahik.hiklife.easycode.entity.$!{tableInfo.name}; import org.springframework.data.jpa.repository.JpaRepository; import org.springframework.data.jpa.repository.JpaSpecificationExecutor; import org.springframework.data.jpa.repository.Modifying; import org.springframework.data.jpa.repository.Query; import org.springframework.stereotype.Repository; ##表注释（宏定义） #classNotes(\u0026#34;表数据库访问层\u0026#34;) @Repository public interface $!{repositoryType} extends JpaRepository\u0026lt;$!{tableInfo.name}, String\u0026gt;, JpaSpecificationExecutor\u0026lt;$!{tableInfo.name}\u0026gt; { @Modifying @Query(nativeQuery = true, value = \u0026#34;update $!{tableInfo.name} set deleted = \u0026#39;1\u0026#39; where id = ?1\u0026#34;) void updateDeletedById(Long id); @Query(nativeQuery = true, value = \u0026#34;select 1 from $!{tableInfo.name} where name = ?1 limit 1\u0026#34;) Integer isExist(String name); @Query(nativeQuery = true, value = \u0026#34;select 1 from $!{tableInfo.name} where id = ?1 limit 1\u0026#34;) Integer isExistById(Long id); } QueryDTO 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 $!{init.vm} $!{define.vm} ##保存文件 #save(\u0026#34;/dto$!{workPath}\u0026#34;, \u0026#34;Query.java\u0026#34;) ##包路径（宏定义） #setPackageSuffix(\u0026#34;dto$!{workPackage}\u0026#34;) ##自动导入包（全局变量） $!{autoImport.vm} import io.swagger.annotations.ApiModel; import io.swagger.annotations.ApiModelProperty; import java.io.Serializable; import lombok.Data; import java.util.Date; ##表注释（宏定义） #classNotes(\u0026#34;查询类\u0026#34;) @Data public class $!{queryType} implements Serializable { private static final long serialVersionUID = 1L; private Integer pageNo = 1; private Integer pageSize = 20; private String sortField = \u0026#34;createDate\u0026#34;; private String sortOrder = \u0026#34;desc\u0026#34;; private String createdTime; private String name; } Define 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 ##（Velocity宏定义） ##定义设置表名后缀的宏定义，调用方式：#setTableSuffix(\u0026#34;Test\u0026#34;) #macro(setTableSuffix $suffix) #set($tableName = $!tool.append($tableInfo.name, $suffix)) #end ##定义设置包名后缀的宏定义，调用方式：#setPackageSuffix(\u0026#34;Test\u0026#34;) #macro(setPackageSuffix $suffix) #if($suffix!=\u0026#34;\u0026#34;)package #end#if($tableInfo.savePackageName!=\u0026#34;\u0026#34;)$!{tableInfo.savePackageName}.#{end}$!suffix; #end ##定义直接保存路径与文件名简化的宏定义，调用方式：#save(\u0026#34;/entity\u0026#34;, \u0026#34;.java\u0026#34;) #macro(save $path $fileName) $!callback.setSavePath($tool.append($tableInfo.savePath, $path)) $!callback.setFileName($tool.append($tableInfo.name, $fileName)) #end ## 自定义entity、Mapper、Service、Api、DTO、VO的名字减少拼接，增加重用性 #set($entityType = $!tool.firstUpperCase($!tableInfo.name)) #set($entityName = $!tool.firstLowerCase($!tableInfo.name)) #set($mapperType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;Mapper\u0026#34;)) #set($mapperName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;Mapper\u0026#34;)) #set($repositoryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;Repository\u0026#34;)) #set($repositoryName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;Repository\u0026#34;)) #set($serviceType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;Service\u0026#34;)) #set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;Service\u0026#34;)) #set($serviceImplType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;ServiceImpl\u0026#34;)) #set($serviceImplName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;ServiceImpl\u0026#34;)) #set($apiType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;Controller\u0026#34;)) #set($apiName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;Controller\u0026#34;)) #set($dtoType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;DTO\u0026#34;)) #set($dtoName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;DTO\u0026#34;)) #set($queryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;Query\u0026#34;)) #set($queryName = \u0026#34;query\u0026#34;) #set($voType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), \u0026#34;VO\u0026#34;)) #set($voName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), \u0026#34;VO\u0026#34;)) ## 自定义类注解 #macro(classNotes $notes) /** * @Description $!tableInfo.obj.name $notes * @Author $!author * @Date $!time.currTime() */ #end Init 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 ##初始化区域 ##去掉表的t_前缀 $!tableInfo.setName($tool.getClassName($tableInfo.obj.name.replaceFirst(\u0026#34;tb_\u0026#34;,\u0026#34;\u0026#34;))) ## 设置业务模块名 #set($index = 0) #foreach ($element in $tableInfo.obj.name.split(\u0026#34;_\u0026#34;)) #set($index = $index +1) #if($index == 3) #set($work = $element) #end #end #if($!{work}) ## 包.模块名 #set($workPackage = $!tool.append(\u0026#34;.\u0026#34;,$!{work})) ## 路径/模块名 #set($workPath = $!tool.append(\u0026#34;/\u0026#34;,$!{work})) ## Common-模块名 #set($workCommon = $!tool.append(\u0026#34;-\u0026#34;,$!{work})) #end ##参考阿里巴巴开发手册，POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误 #foreach($column in $tableInfo.fullColumn) #if($column.name.startsWith(\u0026#34;is\u0026#34;) \u0026amp;\u0026amp; $column.type.equals(\u0026#34;java.lang.Boolean\u0026#34;)) $!column.setName($tool.firstLowerCase($column.name.substring(2))) #end #end ##实现动态排除列 #set($temp = $tool.newHashSet(\u0026#34;testCreateTime\u0026#34;, \u0026#34;otherColumn\u0026#34;)) #foreach($item in $temp) #set($newList = $tool.newArrayList()) #foreach($column in $tableInfo.fullColumn) #if($column.name!=$item) ##带有反回值的方法调用时使用$tool.call来消除返回值 $tool.call($newList.add($column)) #end #end ##重新保存 $tableInfo.setFullColumn($newList) #end ##对importList进行篡改 #set($temp = $tool.newHashSet()) #foreach($column in $tableInfo.fullColumn) #if(!$column.type.startsWith(\u0026#34;java.lang.\u0026#34;)) ##带有反回值的方法调用时使用$tool.call来消除返回值 $tool.call($temp.add($column.type)) #end #end ##覆盖 #set($importList = $temp) autoimport 1 2 3 4 ##自动导入包（仅导入实体属性需要的包，通常用于实体类） #foreach($import in $importList) import $!import; #end ",
  "keywords": [
    "IDEA", "EasyCode", "自动生成代码"
  ],
  "articleBody": "需求 对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。\n自动生成代码的现状 目前有多种方式可以自动生成代码:\n将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性\n在线网站自动生成代码，使用互联网，安全性较低\nIDEA+groovy方法，目前了解到生成的代码比较简单，定制化程度不高\nIDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成\n最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。 \u003e https://gitee.com/makejava/EasyCode\nVelocity(速度)语法 比较精简的一种语言，关键字不多，和代码混合使用。教程：https://www.cnblogs.com/hduwbf/p/6201731.html\nEasyCode 我的模板(具有个人风格，可以进行修改使用) Controller 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 ##导入宏定义 $!{init.vm} $!{define.vm} ##保存文件（宏定义） #save(\"/controller/$!{workPath}\", \"Controller.java\") ##包路径（宏定义） #setPackageSuffix(\"controller$!{workPackage}\") $!{autoImport.vm} import io.swagger.annotations.ApiOperation; import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType}; import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType}; import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType}; import org.springframework.web.bind.annotation.*; import io.swagger.annotations.Api; import org.apache.commons.lang3.StringUtils; import javax.annotation.Resource; import java.util.List; ##表注释（宏定义） #classNotes(\"表控制层\") @Api(tags = \"$!{tableInfo.comment}\") @RestController @RequestMapping(\"$!entityName\") public class $!apiType { @Resource private $!serviceType $!serviceName; /** * 分页查询所有数据 * * @param query 查询实体 * @return 所有数据 */ @PostMapping(\"/queryPage\") @ApiOperation(\"按字段条件分页查询$!{tableInfo.comment}\") public BaseResult",
  "wordCount" : "1859",
  "inLanguage": "en",
  "datePublished": "2022-02-12T15:12:48+08:00",
  "dateModified": "2022-02-12T15:12:48+08:00",
  "author":[{
    "@type": "Person",
    "name": "YuanPeng11"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://isyuanpeng.github.io/posts/tool/idea+easycode%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Isyuanpeng",
    "logo": {
      "@type": "ImageObject",
      "url": "https://isyuanpeng.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://isyuanpeng.github.io/" accesskey="h" title="Isyuanpeng (Alt + H)">Isyuanpeng</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://isyuanpeng.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://isyuanpeng.github.io/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://isyuanpeng.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://isyuanpeng.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://isyuanpeng.github.io/series/" title="Series">
                    <span>Series</span>
                </a>
            </li>
            <li>
                <a href="https://isyuanpeng.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://isyuanpeng.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://isyuanpeng.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      IDEA&#43;EasyCode实现自动生成代码
    </h1>
    <div class="post-meta">&lt;span title=&#39;2022-02-12 15:12:48 &#43;0800 CST&#39;&gt;February 12, 2022&lt;/span&gt;&amp;nbsp;·&amp;nbsp;9 min&amp;nbsp;·&amp;nbsp;YuanPeng11

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e9%9c%80%e6%b1%82" aria-label="需求">需求</a></li>
                    <li>
                        <a href="#%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%81%e7%9a%84%e7%8e%b0%e7%8a%b6" aria-label="自动生成代码的现状">自动生成代码的现状</a></li>
                    <li>
                        <a href="#velocity%e9%80%9f%e5%ba%a6%e8%af%ad%e6%b3%95" aria-label="Velocity(速度)语法">Velocity(速度)语法</a></li>
                    <li>
                        <a href="#easycode" aria-label="EasyCode">EasyCode</a></li>
                    <li>
                        <a href="#%e6%88%91%e7%9a%84%e6%a8%a1%e6%9d%bf%e5%85%b7%e6%9c%89%e4%b8%aa%e4%ba%ba%e9%a3%8e%e6%a0%bc%e5%8f%af%e4%bb%a5%e8%bf%9b%e8%a1%8c%e4%bf%ae%e6%94%b9%e4%bd%bf%e7%94%a8" aria-label="我的模板(具有个人风格，可以进行修改使用)">我的模板(具有个人风格，可以进行修改使用)</a><ul>
                            <ul>
                            
                    <li>
                        <a href="#controller" aria-label="Controller">Controller</a></li>
                    <li>
                        <a href="#entity" aria-label="Entity">Entity</a></li>
                    <li>
                        <a href="#service" aria-label="Service">Service</a></li>
                    <li>
                        <a href="#serviceimpl" aria-label="ServiceImpl">ServiceImpl</a></li>
                    <li>
                        <a href="#vo" aria-label="VO">VO</a></li>
                    <li>
                        <a href="#dto" aria-label="DTO">DTO</a></li>
                    <li>
                        <a href="#repository-jpa" aria-label="Repository JPA">Repository JPA</a></li>
                    <li>
                        <a href="#querydto" aria-label="QueryDTO">QueryDTO</a></li>
                    <li>
                        <a href="#define" aria-label="Define">Define</a></li>
                    <li>
                        <a href="#init" aria-label="Init">Init</a></li>
                    <li>
                        <a href="#autoimport" aria-label="autoimport">autoimport</a>
                    </li>
                </ul>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="需求">需求<a hidden class="anchor" aria-hidden="true" href="#需求">#</a></h2>
<p>对于增删改查类的代码，每次都要写很多重复的代码，所以考虑使用自动生成代码来减少重复工作。</p>
<h2 id="自动生成代码的现状">自动生成代码的现状<a hidden class="anchor" aria-hidden="true" href="#自动生成代码的现状">#</a></h2>
<p>目前有多种方式可以自动生成代码:</p>
<ul>
<li>
<p>将模板引擎集成到项目中，通过代码的形式自动生成代码，此种方法和项目耦合度较高，对项目由侵入性</p>
</li>
<li>
<p>在线网站自动生成代码，使用互联网，安全性较低</p>
</li>
<li>
<p>IDEA+groovy方法，目前了解到生成的代码比较简单，定制化程度不高</p>
</li>
<li>
<p>IDEA插件生成，一般插件也都是以模板引擎为基础，进行代码的生成</p>
</li>
</ul>
<p>最后选择了第四种，IDEA插件的方式，插件使用的是EasyCode, 基于velocity模板引擎。
&gt; <a href="https://gitee.com/makejava/EasyCode">https://gitee.com/makejava/EasyCode</a></p>
<h2 id="velocity速度语法">Velocity(速度)语法<a hidden class="anchor" aria-hidden="true" href="#velocity速度语法">#</a></h2>
<p>比较精简的一种语言，关键字不多，和代码混合使用。教程：<a href="https://www.cnblogs.com/hduwbf/p/6201731.html">https://www.cnblogs.com/hduwbf/p/6201731.html</a></p>
<h2 id="easycode">EasyCode<a hidden class="anchor" aria-hidden="true" href="#easycode">#</a></h2>
<h2 id="我的模板具有个人风格可以进行修改使用">我的模板(具有个人风格，可以进行修改使用)<a hidden class="anchor" aria-hidden="true" href="#我的模板具有个人风格可以进行修改使用">#</a></h2>
<h4 id="controller">Controller<a hidden class="anchor" aria-hidden="true" href="#controller">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    ##导入宏定义
</span></span><span style="display:flex;"><span>    $!{init.vm}
</span></span><span style="display:flex;"><span>    $!{define.vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ##保存文件（宏定义）
</span></span><span style="display:flex;"><span>    #save(&#34;/controller/$!{workPath}&#34;, &#34;Controller.java&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ##包路径（宏定义）
</span></span><span style="display:flex;"><span>    #setPackageSuffix(&#34;controller$!{workPackage}&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    $!{autoImport.vm}
</span></span><span style="display:flex;"><span>    import io.swagger.annotations.ApiOperation;
</span></span><span style="display:flex;"><span>    import $!{tableInfo.savePackageName}.service$!{workPackage}.$!{serviceType};
</span></span><span style="display:flex;"><span>    import $!{tableInfo.savePackageName}.dto$!{workPackage}.$!{dtoType};
</span></span><span style="display:flex;"><span>    import $!{tableInfo.savePackageName}.vo$!{workPackage}.$!{voType};
</span></span><span style="display:flex;"><span>    import org.springframework.web.bind.annotation.*;
</span></span><span style="display:flex;"><span>    import io.swagger.annotations.Api;
</span></span><span style="display:flex;"><span>    import org.apache.commons.lang3.StringUtils;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    import javax.annotation.Resource;
</span></span><span style="display:flex;"><span>    import java.util.List;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ##表注释（宏定义）
</span></span><span style="display:flex;"><span>    #classNotes(&#34;表控制层&#34;)
</span></span><span style="display:flex;"><span>    @Api(tags = &#34;$!{tableInfo.comment}&#34;)
</span></span><span style="display:flex;"><span>    @RestController
</span></span><span style="display:flex;"><span>    @RequestMapping(&#34;$!entityName&#34;)
</span></span><span style="display:flex;"><span>    public class $!apiType {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        @Resource
</span></span><span style="display:flex;"><span>        private $!serviceType $!serviceName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>        * 分页查询所有数据
</span></span><span style="display:flex;"><span>        *
</span></span><span style="display:flex;"><span>        * @param query 查询实体
</span></span><span style="display:flex;"><span>        * @return 所有数据
</span></span><span style="display:flex;"><span>        */
</span></span><span style="display:flex;"><span>        @PostMapping(&#34;/queryPage&#34;)
</span></span><span style="display:flex;"><span>        @ApiOperation(&#34;按字段条件分页查询$!{tableInfo.comment}&#34;)
</span></span><span style="display:flex;"><span>        public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; query$!{entityType}ByPage(@RequestBody $!{queryType} query) {
</span></span><span style="display:flex;"><span>            return $!{serviceName}.queryByPage(query);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>        * 通过主键查询多条数据
</span></span><span style="display:flex;"><span>        *
</span></span><span style="display:flex;"><span>        * @param  query 查询实体
</span></span><span style="display:flex;"><span>        * @return 多条数据
</span></span><span style="display:flex;"><span>        */
</span></span><span style="display:flex;"><span>        @PostMapping(&#34;/query&#34;)
</span></span><span style="display:flex;"><span>        @ApiOperation(&#34;根据Id查询$!{tableInfo.comment}&#34;)
</span></span><span style="display:flex;"><span>        public BaseResult&lt;List&lt;$!voType&gt;&gt; query(@RequestBody $!{queryType} query) {
</span></span><span style="display:flex;"><span>            return $!{serviceName}.queryByCondition(query);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>        * 新增数据
</span></span><span style="display:flex;"><span>        *
</span></span><span style="display:flex;"><span>        * @param dto 实体对象
</span></span><span style="display:flex;"><span>        * @return 新增结果
</span></span><span style="display:flex;"><span>        */
</span></span><span style="display:flex;"><span>        @PostMapping(&#34;/save&#34;)
</span></span><span style="display:flex;"><span>        @ApiOperation(&#34;新增$!{tableInfo.comment}数据&#34;)
</span></span><span style="display:flex;"><span>        public BaseResult&lt;Object&gt; save(@RequestBody $!{dtoType} dto) {
</span></span><span style="display:flex;"><span>            //数据校验
</span></span><span style="display:flex;"><span>            if (StringUtils.isBlank(dto.getName())) {
</span></span><span style="display:flex;"><span>                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            if ($!{serviceName}.isExist(dto)) {
</span></span><span style="display:flex;"><span>                return new BaseResult&lt;&gt;(ResponseEnum.REPEAT.getCode(), ResponseEnum.REPEAT.getMessage());
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            return $!{serviceName}.save(dto);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>        * 修改数据
</span></span><span style="display:flex;"><span>        *
</span></span><span style="display:flex;"><span>        * @param dto 实体对象
</span></span><span style="display:flex;"><span>        * @return 修改结果
</span></span><span style="display:flex;"><span>        */
</span></span><span style="display:flex;"><span>        @PostMapping(&#34;/update&#34;)
</span></span><span style="display:flex;"><span>        @ApiOperation(&#34;更新$!{tableInfo.comment}&#34;)
</span></span><span style="display:flex;"><span>        public BaseResult&lt;Object&gt; update($!{dtoType} dto) {
</span></span><span style="display:flex;"><span>            //数据校验
</span></span><span style="display:flex;"><span>            if (StringUtils.isBlank(dto.getName())) {
</span></span><span style="display:flex;"><span>                return new BaseResult&lt;&gt;(ResponseEnum.NO_ARGS.getCode(), ResponseEnum.NO_ARGS.getMessage());
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            return $!{serviceName}.update(dto);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>        * 删除多条数据
</span></span><span style="display:flex;"><span>        *
</span></span><span style="display:flex;"><span>        * @param ids 主键ids
</span></span><span style="display:flex;"><span>        * @return 删除结果
</span></span><span style="display:flex;"><span>        */
</span></span><span style="display:flex;"><span>        @PostMapping(&#34;/delete&#34;)
</span></span><span style="display:flex;"><span>        @ApiOperation(&#34;根据Id软删除$!{tableInfo.comment}数据&#34;)
</span></span><span style="display:flex;"><span>        public BaseResult&lt;List&lt;SingleResult&gt;&gt; deleteByRowIds(List&lt;Long&gt; ids) {
</span></span><span style="display:flex;"><span>            List&lt;SingleResult&gt; result = new ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>            ids.forEach(x -&gt; {
</span></span><span style="display:flex;"><span>                // 数据校验
</span></span><span style="display:flex;"><span>                if (!$!{serviceName}.isExistById(x)) {
</span></span><span style="display:flex;"><span>                    result.add(SingleResult.successBuild(x.toString()));
</span></span><span style="display:flex;"><span>                } else {
</span></span><span style="display:flex;"><span>                    result.add($!{serviceName}.deleteById(x));
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>            return BaseResult.success(result);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="entity">Entity<a hidden class="anchor" aria-hidden="true" href="#entity">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#f92672">$!</span>{init<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{define<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span><span style="color:#75715e">##保存文件（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#save(&#34;/entity$!{workPath}&#34;, &#34;.java&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##包路径（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#setPackageSuffix(&#34;entity$!{workPackage}&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import io<span style="color:#f92672">.</span>swagger<span style="color:#f92672">.</span>annotations<span style="color:#f92672">.</span>ApiModel;
</span></span><span style="display:flex;"><span>import io<span style="color:#f92672">.</span>swagger<span style="color:#f92672">.</span>annotations<span style="color:#f92672">.</span>ApiModelProperty;
</span></span><span style="display:flex;"><span>import lombok<span style="color:#f92672">.</span>Data;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import javax<span style="color:#f92672">.</span>persistence<span style="color:#f92672">.*</span>;
</span></span><span style="display:flex;"><span>import java<span style="color:#f92672">.</span>io<span style="color:#f92672">.</span>Serializable;
</span></span><span style="display:flex;"><span>import java<span style="color:#f92672">.</span>util<span style="color:#f92672">.</span>Date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##表注释（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#classNotes(&#34;&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>Data
</span></span><span style="display:flex;"><span><span style="color:#75715e">##@ApiModel(value=&#34;$tableInfo.savePackageName.replace(&#34;.&#34;,&#34;-&#34;)-entity$!{workCommon}-$!{entityType}&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>ApiModel(value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;$!{tableInfo.comment}&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>Table(name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!{tableInfo.obj.name}&#34;</span>)
</span></span><span style="display:flex;"><span>public <span style="color:#66d9ef">class</span> <span style="color:#f92672">$!</span>entityType implements Serializable {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private <span style="color:#66d9ef">static</span> final long serialVersionUID <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>L;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 主键列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.pkColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>comment
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>Id
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>GeneratedValue(strategy<span style="color:#f92672">=</span>GenerationType<span style="color:#f92672">.</span>IDENTITY)
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>Column(name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!{column.obj.name}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 其他列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.otherColumn)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>{column<span style="color:#f92672">.</span>comment}
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>Column(name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!{column.obj.name}&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="service">Service<a hidden class="anchor" aria-hidden="true" href="#service">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>##导入宏定义
</span></span><span style="display:flex;"><span>$!{init.vm}
</span></span><span style="display:flex;"><span>$!{define.vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##保存文件（宏定义）
</span></span><span style="display:flex;"><span>#save(&#34;/service$!{workPath}&#34;, &#34;Service.java&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##包路径（宏定义）
</span></span><span style="display:flex;"><span>#setPackageSuffix(&#34;service$!{workPackage}&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$!{autoimpot.vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##表注释（宏定义）
</span></span><span style="display:flex;"><span>#classNotes(&#34;表服务接口&#34;)
</span></span><span style="display:flex;"><span>public interface $!serviceType {
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>    BaseResult&lt;PageVo&lt;$!{voType}&gt;&gt; queryByPage($!{queryType} query);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BaseResult&lt;Object&gt; save($!{dtoType} dto);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!{dtoType}&gt; dtos);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	BaseResult&lt;Object&gt; update($!{dtoType} dto);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!{dtoType}&gt; dtos);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    SingleResult deleteById(Long id);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	boolean isExist($!{dtoType} dto);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>    boolean isExistById(Long id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="serviceimpl">ServiceImpl<a hidden class="anchor" aria-hidden="true" href="#serviceimpl">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>##导入宏定义
</span></span><span style="display:flex;"><span>$!{init.vm}
</span></span><span style="display:flex;"><span>$!{define.vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##保存文件（宏定义）
</span></span><span style="display:flex;"><span>#save(&#34;/service/impl/$!{workPath}&#34;, &#34;ServiceImpl.java&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##包路径（宏定义）
</span></span><span style="display:flex;"><span>#setPackageSuffix(&#34;service.impl$!{workPackage}&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$!{autoimport.vm}
</span></span><span style="display:flex;"><span>import org.apache.commons.lang3.StringUtils;
</span></span><span style="display:flex;"><span>import javax.transaction.Transactional;
</span></span><span style="display:flex;"><span>import $!{tableInfo.savePackageName}.entity$!{workPackage}.$!{entityType};
</span></span><span style="display:flex;"><span>import javax.persistence.criteria.Predicate;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>#classNotes(&#34;表服务实现类&#34;)
</span></span><span style="display:flex;"><span>@Service
</span></span><span style="display:flex;"><span>public class $!{serviceImplType} implements $!{serviceType} {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Resource
</span></span><span style="display:flex;"><span>    private $!{repositoryType} $!{repositoryName};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 查询多条数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param query 查询参数
</span></span><span style="display:flex;"><span>     * @return 实例对象
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public BaseResult&lt;List&lt;$!{voType}&gt;&gt; queryByCondition($!{queryType} query) {
</span></span><span style="display:flex;"><span>		List&lt;$!{tableInfo.name}&gt; items = $!{repositoryName}.findAll(getWhereClause(query));
</span></span><span style="display:flex;"><span>        return BaseResult.success(BaseConverter.convertAll(items, $!{voType}.class));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 分页查询
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param query 筛选条件
</span></span><span style="display:flex;"><span>     * @return 查询结果
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public BaseResult&lt;PageVo&lt;$!voType&gt;&gt; queryByPage($!{queryType} query) {
</span></span><span style="display:flex;"><span>		try {
</span></span><span style="display:flex;"><span>			Sort sort = Sort.by(&#34;desc&#34;.equals(query.getSortOrder()) ? Sort.Direction.DESC : Sort.Direction.ASC,
</span></span><span style="display:flex;"><span>            query.getSortField());
</span></span><span style="display:flex;"><span>			Pageable pageable = PageRequest.of(query.getPageNo() - 1, (query.getPageSize()), sort);
</span></span><span style="display:flex;"><span>			Page&lt;$!{tableInfo.name}&gt; page = $!{repositoryName}.findAll(getWhereClause(query), pageable);
</span></span><span style="display:flex;"><span>			return BaseResult.success(BaseConverter.convertPage(page, $!{voType}.class));
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;查询分页失败&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 新增数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param dto dto对象
</span></span><span style="display:flex;"><span>     * @return vo $!voName
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public BaseResult&lt;Object&gt; save($!dtoType dto) {
</span></span><span style="display:flex;"><span>        try {
</span></span><span style="display:flex;"><span>			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
</span></span><span style="display:flex;"><span>			$!{repositoryName}.save(entity);
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>        return new BaseResult&lt;&gt;();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	/**
</span></span><span style="display:flex;"><span>     * 批量新增数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param dtos dto对象
</span></span><span style="display:flex;"><span>     * @return BaseResult
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public BaseResult&lt;List&lt;SingleResult&gt;&gt; saveBatch(List&lt;$!dtoType&gt; dtos) {
</span></span><span style="display:flex;"><span>        try {
</span></span><span style="display:flex;"><span>			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
</span></span><span style="display:flex;"><span>			$!{repositoryName}.saveAll(entitys);
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;保存失败&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>        return new BaseResult&lt;&gt;();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	/**
</span></span><span style="display:flex;"><span>     * 修改数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param  dto dto对象 
</span></span><span style="display:flex;"><span>     * @return BaseResult
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>	@Transactional
</span></span><span style="display:flex;"><span>    public BaseResult&lt;Object&gt; update($!dtoType dto) {
</span></span><span style="display:flex;"><span>        try {
</span></span><span style="display:flex;"><span>			$!{tableInfo.name} entity = BaseConverter.convert(dto, $!{tableInfo.name}.class);
</span></span><span style="display:flex;"><span>			$!{repositoryName}.save(entity);
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;更新失败&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>        return new BaseResult&lt;&gt;();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 批量修改数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param dtos dto对象
</span></span><span style="display:flex;"><span>     * @return 实例对象
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>	@Transactional
</span></span><span style="display:flex;"><span>    public BaseResult&lt;List&lt;SingleResult&gt;&gt; updateBatch(List&lt;$!dtoType&gt; dtos) {
</span></span><span style="display:flex;"><span>        try {
</span></span><span style="display:flex;"><span>			List&lt;$!{tableInfo.name}&gt; entitys = BaseConverter.convertAll(dtos, $!{tableInfo.name}.class);
</span></span><span style="display:flex;"><span>			$!{repositoryName}.saveAll(entitys);
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return new BaseResult&lt;&gt;(&#34;-1&#34;, &#34;批量更新失败&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>        return new BaseResult&lt;&gt;();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * 通过主键删除数据
</span></span><span style="display:flex;"><span>     *
</span></span><span style="display:flex;"><span>     * @param id 主键
</span></span><span style="display:flex;"><span>     * @return 是否成功
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>	@Transactional
</span></span><span style="display:flex;"><span>    public SingleResult deleteById(Long id) {
</span></span><span style="display:flex;"><span>		try {
</span></span><span style="display:flex;"><span>			$!{repositoryName}.updateDeletedById(id);
</span></span><span style="display:flex;"><span>		} catch (Exception e) {
</span></span><span style="display:flex;"><span>			return SingleResult.build(id.toString(), &#34;false&#34;, &#34;删除异常&#34;);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>        return SingleResult.successBuild(id.toString());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public boolean isExist($!{dtoType} dto) {
</span></span><span style="display:flex;"><span>        Integer exist = $!{repositoryName}.isExist(dto.getName());
</span></span><span style="display:flex;"><span>        return null != exist;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    public boolean isExistById(Long id) {
</span></span><span style="display:flex;"><span>        Integer exist = $!{repositoryName}.isExistById(id);
</span></span><span style="display:flex;"><span>        return null != exist;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	private Specification&lt;$!{tableInfo.name}&gt; getWhereClause($!{queryType} query) {
</span></span><span style="display:flex;"><span>        return (Specification&lt;$!{tableInfo.name}&gt;) (root, criteriaQuery, criteriaBuilder) -&gt; {
</span></span><span style="display:flex;"><span>            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>            if (StringUtils.isNotBlank(query.getName())) {
</span></span><span style="display:flex;"><span>                predicates.add(criteriaBuilder.like(root.get(&#34;name&#34;), &#34;%&#34; + query.getName() + &#34;%&#34;));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
</span></span><span style="display:flex;"><span>                //大于等于开始时间
</span></span><span style="display:flex;"><span>                predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            if (ObjectUtils.isNotEmpty(query.getCreatedTime())) {
</span></span><span style="display:flex;"><span>                //小于等于结束时间
</span></span><span style="display:flex;"><span>                predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&#34;createTime&#34;), DateUtil.parse(query.getCreatedTime())));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="vo">VO<a hidden class="anchor" aria-hidden="true" href="#vo">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#f92672">$!</span>{init<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{define<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##保存文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#save(&#34;/vo$!{workPath}&#34;, &#34;VO.java&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##包路径（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#setPackageSuffix(&#34;vo$!{workPackage}&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##自动导入包（全局变量）</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{autoImport<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span>import java<span style="color:#f92672">.</span>util<span style="color:#f92672">.</span>Date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##表注释（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#classNotes(&#34;&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>Data
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>ApiModel(value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;$tableInfo.savePackageName.replace(&#34;</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">-</span><span style="color:#e6db74">&#34;)-dto$!{workCommon}-$!{voType}&#34;</span>)
</span></span><span style="display:flex;"><span>public <span style="color:#66d9ef">class</span> <span style="color:#f92672">$!</span>voType implements Serializable {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private <span style="color:#66d9ef">static</span> final long serialVersionUID <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>L;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 主键列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.pkColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>comment
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 其他列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.otherColumn)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>{column<span style="color:#f92672">.</span>comment}
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="dto">DTO<a hidden class="anchor" aria-hidden="true" href="#dto">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#f92672">$!</span>{init<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{define<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##保存文件</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#save(&#34;/dto$!{workPath}&#34;, &#34;DTO.java&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##包路径（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#setPackageSuffix(&#34;dto$!{workPackage}&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##自动导入包（全局变量）</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{autoImport<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span>import io<span style="color:#f92672">.</span>swagger<span style="color:#f92672">.</span>annotations<span style="color:#f92672">.</span>ApiModel;
</span></span><span style="display:flex;"><span>import io<span style="color:#f92672">.</span>swagger<span style="color:#f92672">.</span>annotations<span style="color:#f92672">.</span>ApiModelProperty;
</span></span><span style="display:flex;"><span>import java<span style="color:#f92672">.</span>io<span style="color:#f92672">.</span>Serializable;
</span></span><span style="display:flex;"><span>import lombok<span style="color:#f92672">.</span>Data;
</span></span><span style="display:flex;"><span>import java<span style="color:#f92672">.</span>util<span style="color:#f92672">.</span>Date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##表注释（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#classNotes(&#34;&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>Data
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>ApiModel(value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;$tableInfo.savePackageName.replace(&#34;</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">-</span><span style="color:#e6db74">&#34;)-dto$!{workCommon}-$!{dtoType}&#34;</span>)
</span></span><span style="display:flex;"><span>public <span style="color:#66d9ef">class</span> <span style="color:#f92672">$!</span>dtoType implements Serializable {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private <span style="color:#66d9ef">static</span> final long serialVersionUID <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>L;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 主键列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.pkColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>comment
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 其他列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.otherColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*</span> <span style="color:#f92672">$!</span>{column<span style="color:#f92672">.</span>comment}
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>ApiModelProperty(value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;$!column.comment&#34;</span>)
</span></span><span style="display:flex;"><span>    private <span style="color:#f92672">$!</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClsNameByFullName(<span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>type) <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>name;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="repository-jpa">Repository JPA<a hidden class="anchor" aria-hidden="true" href="#repository-jpa">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#75715e">##导入宏定义</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{init<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>{define<span style="color:#f92672">.</span>vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##保存文件（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#save(&#34;/repository/$!{workPath}&#34;, &#34;Repository.java&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##包路径（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#setPackageSuffix(&#34;repository$!{workPackage}&#34;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import com<span style="color:#f92672">.</span>javahik<span style="color:#f92672">.</span>hiklife<span style="color:#f92672">.</span>easycode<span style="color:#f92672">.</span>entity<span style="color:#f92672">.$!</span>{tableInfo<span style="color:#f92672">.</span>name};
</span></span><span style="display:flex;"><span>import org<span style="color:#f92672">.</span>springframework<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>jpa<span style="color:#f92672">.</span>repository<span style="color:#f92672">.</span>JpaRepository;
</span></span><span style="display:flex;"><span>import org<span style="color:#f92672">.</span>springframework<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>jpa<span style="color:#f92672">.</span>repository<span style="color:#f92672">.</span>JpaSpecificationExecutor;
</span></span><span style="display:flex;"><span>import org<span style="color:#f92672">.</span>springframework<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>jpa<span style="color:#f92672">.</span>repository<span style="color:#f92672">.</span>Modifying;
</span></span><span style="display:flex;"><span>import org<span style="color:#f92672">.</span>springframework<span style="color:#f92672">.</span>data<span style="color:#f92672">.</span>jpa<span style="color:#f92672">.</span>repository<span style="color:#f92672">.</span>Query;
</span></span><span style="display:flex;"><span>import org<span style="color:#f92672">.</span>springframework<span style="color:#f92672">.</span>stereotype<span style="color:#f92672">.</span>Repository;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##表注释（宏定义）</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#classNotes(&#34;表数据库访问层&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">@</span>Repository
</span></span><span style="display:flex;"><span>public interface <span style="color:#f92672">$!</span>{repositoryType} <span style="color:#66d9ef">extends</span> JpaRepository<span style="color:#f92672">&lt;$!</span>{tableInfo<span style="color:#f92672">.</span>name}, <span style="color:#a6e22e">String</span><span style="color:#f92672">&gt;</span>, JpaSpecificationExecutor<span style="color:#f92672">&lt;$!</span>{tableInfo<span style="color:#f92672">.</span>name}<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#960050;background-color:#1e0010">@</span>Modifying
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">@</span>Query(nativeQuery <span style="color:#f92672">=</span> true, value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;update $!{tableInfo.name} set deleted = &#39;1&#39; where id = ?1&#34;</span>)
</span></span><span style="display:flex;"><span>    void updateDeletedById(Long id);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#960050;background-color:#1e0010">@</span>Query(nativeQuery <span style="color:#f92672">=</span> true, value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select 1 from $!{tableInfo.name} where name = ?1 limit 1&#34;</span>)
</span></span><span style="display:flex;"><span>	Integer isExist(<span style="color:#a6e22e">String</span> name);
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#960050;background-color:#1e0010">@</span>Query(nativeQuery <span style="color:#f92672">=</span> true, value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;select 1 from $!{tableInfo.name} where id = ?1 limit 1&#34;</span>)
</span></span><span style="display:flex;"><span>	Integer isExistById(Long id);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="querydto">QueryDTO<a hidden class="anchor" aria-hidden="true" href="#querydto">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$!{init.vm}
</span></span><span style="display:flex;"><span>$!{define.vm}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##保存文件
</span></span><span style="display:flex;"><span>#save(&#34;/dto$!{workPath}&#34;, &#34;Query.java&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##包路径（宏定义）
</span></span><span style="display:flex;"><span>#setPackageSuffix(&#34;dto$!{workPackage}&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##自动导入包（全局变量）
</span></span><span style="display:flex;"><span>$!{autoImport.vm}
</span></span><span style="display:flex;"><span>import io.swagger.annotations.ApiModel;
</span></span><span style="display:flex;"><span>import io.swagger.annotations.ApiModelProperty;
</span></span><span style="display:flex;"><span>import java.io.Serializable;
</span></span><span style="display:flex;"><span>import lombok.Data;
</span></span><span style="display:flex;"><span>import java.util.Date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##表注释（宏定义）
</span></span><span style="display:flex;"><span>#classNotes(&#34;查询类&#34;)
</span></span><span style="display:flex;"><span>@Data
</span></span><span style="display:flex;"><span>public class $!{queryType} implements Serializable {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private static final long serialVersionUID = 1L;
</span></span><span style="display:flex;"><span>       
</span></span><span style="display:flex;"><span>    private Integer pageNo = 1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private Integer pageSize = 20;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private String sortField = &#34;createDate&#34;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    private String sortOrder = &#34;desc&#34;;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    private String createdTime;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    private String name;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="define">Define<a hidden class="anchor" aria-hidden="true" href="#define">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#75715e">##（Velocity宏定义）</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##定义设置表名后缀的宏定义，调用方式：#setTableSuffix(&#34;Test&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#macro(setTableSuffix $suffix)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($tableName = $!tool.append($tableInfo.name, $suffix))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##定义设置包名后缀的宏定义，调用方式：#setPackageSuffix(&#34;Test&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#macro(setPackageSuffix $suffix)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#if($suffix!=&#34;&#34;)package #end#if($tableInfo.savePackageName!=&#34;&#34;)$!{tableInfo.savePackageName}.#{end}$!suffix;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##定义直接保存路径与文件名简化的宏定义，调用方式：#save(&#34;/entity&#34;, &#34;.java&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#macro(save $path $fileName)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">$!</span>callback<span style="color:#f92672">.</span>setSavePath(<span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>append(<span style="color:#f92672">$</span>tableInfo<span style="color:#f92672">.</span>savePath, <span style="color:#f92672">$</span>path))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">$!</span>callback<span style="color:#f92672">.</span>setFileName(<span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>append(<span style="color:#f92672">$</span>tableInfo<span style="color:#f92672">.</span>name, <span style="color:#f92672">$</span>fileName))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 自定义entity、Mapper、Service、Api、DTO、VO的名字减少拼接，增加重用性</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($entityType = $!tool.firstUpperCase($!tableInfo.name))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($entityName = $!tool.firstLowerCase($!tableInfo.name))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($mapperType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Mapper&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($mapperName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Mapper&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($repositoryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Repository&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($repositoryName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Repository&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($serviceType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Service&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($serviceName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Service&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($serviceImplType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;ServiceImpl&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($serviceImplName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;ServiceImpl&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($apiType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Controller&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($apiName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;Controller&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($dtoType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;DTO&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($dtoName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;DTO&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($queryType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;Query&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($queryName = &#34;query&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($voType = $!tool.append($!tool.firstUpperCase($!tableInfo.name), &#34;VO&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($voName = $!tool.append($!tool.firstLowerCase($!tableInfo.name), &#34;VO&#34;))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 自定义类注解</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#macro(classNotes $notes)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/**</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">*</span> <span style="color:#960050;background-color:#1e0010">@</span>Description <span style="color:#f92672">$!</span>tableInfo<span style="color:#f92672">.</span>obj<span style="color:#f92672">.</span>name <span style="color:#f92672">$</span>notes
</span></span><span style="display:flex;"><span> <span style="color:#f92672">*</span> <span style="color:#960050;background-color:#1e0010">@</span>Author <span style="color:#f92672">$!</span>author
</span></span><span style="display:flex;"><span> <span style="color:#f92672">*</span> <span style="color:#960050;background-color:#1e0010">@</span>Date <span style="color:#f92672">$!</span>time<span style="color:#f92672">.</span>currTime()
</span></span><span style="display:flex;"><span> <span style="color:#f92672">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="init">Init<a hidden class="anchor" aria-hidden="true" href="#init">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#75715e">##初始化区域</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##去掉表的t_前缀</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$!</span>tableInfo<span style="color:#f92672">.</span>setName(<span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>getClassName(<span style="color:#f92672">$</span>tableInfo<span style="color:#f92672">.</span>obj<span style="color:#f92672">.</span>name<span style="color:#f92672">.</span>replaceFirst(<span style="color:#e6db74">&#34;tb_&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 设置业务模块名</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($index = 0)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach ($element in $tableInfo.obj.name.split(&#34;_&#34;))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($index = $index +1)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#if($index == 3)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#set($work = $element)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#if($!{work})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">## 包.模块名</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($workPackage = $!tool.append(&#34;.&#34;,$!{work}))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">## 路径/模块名</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($workPath = $!tool.append(&#34;/&#34;,$!{work}))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">## Common-模块名</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($workCommon = $!tool.append(&#34;-&#34;,$!{work}))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##参考阿里巴巴开发手册，POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.fullColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#if($column.name.startsWith(&#34;is&#34;) &amp;&amp; $column.type.equals(&#34;java.lang.Boolean&#34;))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">$!</span>column<span style="color:#f92672">.</span>setName(<span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>firstLowerCase(<span style="color:#f92672">$</span>column<span style="color:#f92672">.</span>name<span style="color:#f92672">.</span>substring(<span style="color:#ae81ff">2</span>)))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##实现动态排除列</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($temp = $tool.newHashSet(&#34;testCreateTime&#34;, &#34;otherColumn&#34;))</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($item in $temp)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#set($newList = $tool.newArrayList())</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#foreach($column in $tableInfo.fullColumn)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#if($column.name!=$item)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">##带有反回值的方法调用时使用$tool.call来消除返回值</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>call(<span style="color:#f92672">$</span>newList<span style="color:#f92672">.</span>add(<span style="color:#f92672">$</span>column))
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">##重新保存</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">$</span>tableInfo<span style="color:#f92672">.</span>setFullColumn(<span style="color:#f92672">$</span>newList)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##对importList进行篡改</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($temp = $tool.newHashSet())</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#foreach($column in $tableInfo.fullColumn)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#if(!$column.type.startsWith(&#34;java.lang.&#34;))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">##带有反回值的方法调用时使用$tool.call来消除返回值</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">$</span><span style="color:#66d9ef">tool</span><span style="color:#f92672">.</span>call(<span style="color:#f92672">$</span>temp<span style="color:#f92672">.</span>add(<span style="color:#f92672">$</span>column<span style="color:#f92672">.</span>type))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">##覆盖</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#set($importList = $temp)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="autoimport">autoimport<a hidden class="anchor" aria-hidden="true" href="#autoimport">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>##自动导入包（仅导入实体属性需要的包，通常用于实体类）
</span></span><span style="display:flex;"><span>#foreach($import in $importList)
</span></span><span style="display:flex;"><span>import $!import;
</span></span><span style="display:flex;"><span>#end
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://isyuanpeng.github.io/tags/idea/">IDEA</a></li>
      <li><a href="https://isyuanpeng.github.io/tags/easycode/">EasyCode</a></li>
      <li><a href="https://isyuanpeng.github.io/tags/%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/">自动生成代码</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://isyuanpeng.github.io/posts/question/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93%E8%86%A8%E8%83%80%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E8%BF%87%E7%A8%8B/">
    <span class="title">« Prev Page</span>
    <br>
    <span>记一次数据库膨胀问题的解决过程</span>
  </a>
  <a class="next" href="https://isyuanpeng.github.io/posts/tech/markdown-syntax/">
    <span class="title">Next Page »</span>
    <br>
    <span>Markdown Syntax Guide</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://isyuanpeng.github.io/">Isyuanpeng</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
